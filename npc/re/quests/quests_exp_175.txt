//===== rAthena Script =======================================
//= Quests EXP
//===== Description: =========================================
//= [Walkthrough Conversion]
//--- NPC quests related to new dungeons.
//===== Changelog: ===========================================
//= 1.0 Initial release [Capuche]
//= 1.1 Added Initial release ein_dun03 [Capuche]
//= 1.2 Added Initial release odin past
//= 1.3 Added sp_rudus4 quests. [Capuche]
//= 1.4 Added Amicitia quests. [Capuche]
//= 1.5 Added nif_dun01 and nif_dun02 quests. [Capuche]
//============================================================

// mag_dun03
yuno_fild03,38,146,5	script	Lily Blanc	-1,{
	if (BaseLevel < 175) {
		mes "[Lily]";
		mes "...?";
		mes "...well, I don't think the guards will let you in...";
		next;
		mes "[Lily]";
		mes "If you are qualified to enter the 3rd floor of Nogg Road, would you accept a quest?";
		mes "We need a lot of work.";
		mes "The guards said level 175 is enough...";
		close;
	}
	mes "[Lily]";
	mes "Friendly adventurer, would you mind helping us with the research for our conference report?";
	mes "Only an adventurer's eye is the only way for us to live.";
	next;
	switch( select( "Listen to the request", "Suspicious...", "Reject" ) ) {
	case 1:
		mes "[Lily]";
		mes "Generous adventurer! Thank you.";
		mes "The request is on the 3rd floor of Nogg Road, a place I can't enter yet, but the conference wants a report...";
		next;
		setarray .@quest_list[1], 8550, 8553, 8556, 8559;
		.@s = select( "Deleter that caused evolution", "Extermination of nightmares that became reality", "Check density", "Small things crumbling", "Next time" );

		if (.@s < 5) {
			.@quest_first = .@quest_list[.@s];
			.@quest_delay = .@quest_first + 1;
			.@quest_daily = .@quest_first + 2;

			callsub( S_CheckDelay, .@quest_delay );

			if (isbegin_quest(.@quest_first) < 2)
				.@quest_ongoing = .@quest_first;
			else
				.@quest_ongoing = .@quest_daily;
		}

		switch( .@s ) {
		case 1:
			switch( checkquest(.@quest_ongoing,HUNTING) ) {
			case -1:
				if (.@quest_ongoing == .@quest_first) {
					mes "[Lily]";
					mes "Our doctor said that monsters change their characteristics and appearance when they live in different places...";
					mes "Dr. and me too... Because combat isn't my major.";
					next;
					mes "[Lily]";
					mes "So here... Let's see.";
					mes "^0000FFThere is a report that the Rigid Earth Deleter and Rigid Sky Deleter^000000 caused abnormal evolution.";
					mes "But I can't even approach them because of their ferocious personality...";
					next;
				}
				mes "[Lily]";
				mes "Haunted on the 3rd floor of Nogg Road,";
				mes "^0000FFKill 15 Rigid Sky Deleter^000000";
				mes "and 15 ^0000FFRigid Earth Deleter^000000 and tell me how hard they were.";
				callsub( S_Give, .@quest_ongoing );
			case 0:
			case 1:
				mes "[Lily]";
				mes "Haunted on the 3rd floor of Nogg Road,";
				mes "^0000FFKill 15 Rigid Sky Deleter^000000";
				mes "and 15 ^0000FFRigid Earth Deleter^000000 and tell me how hard they were.";
				close;
			case 2:
				mes "[Lily]";
				mes "How was it?";
				mes "How was it different from just an air or ground Deleter?";
				next;
				mes "[Lily]";
				mes "Hmm... are you okay?";
				mes "Hmmmm. Okay";
				callsub( S_SetDelay, .@quest_ongoing, .@quest_first, .@quest_delay, 4852278,3396600 );
			}
			end;
		case 2:
			switch( checkquest(.@quest_ongoing,HUNTING) ) {
			case -1:
				if (.@quest_ongoing == .@quest_first) {
					mes "[Lily]";
					mes "Rigid Nightmare Terror is a hardened nightmare terror...";
					mes "I've only seen Nightmare terror. Just looking at it made me stiff and unable to move. Although the professor dragged me out...";
					next;
					mes "[Lily]";
					mes "So here... Let's see.";
				}
				else {
					mes "[Lily]";
				}
				mes "Haunted on the 3rd floor of Nogg Road,";
				mes "^0000FFDefeat 10 Rigid Nightmare Terror^000000 and tell me how hard it is.";
				callsub( S_Give, .@quest_ongoing );
			case 0:
			case 1:
				mes "[Lily]";
				mes "Haunted on the 3rd floor of Nogg Road";
				mes "^0000FF Defeat 10 Rigid Nightmare Terror^000000 and tell me how hard it is.";
				close;
			case 2:
				mes "[Lily]";
				mes "How was it?";
				mes "How was it different from just a Nightmare Terror?";
				next;
				mes "[Lily]";
				mes "Huh... Really?";
				mes "What should I do... my God. Is it real?";
				mes "Hmmmm. Okay";
				callsub( S_SetDelay, .@quest_ongoing, .@quest_first, .@quest_delay, 1661868,1163304 );
			}
			end;
		case 3:
			switch( checkquest(.@quest_ongoing,HUNTING) ) {
			case -1:
				if (.@quest_ongoing == .@quest_first) {
					mes "[Lily]";
					mes "I've heard that there is a huge difference in density between a Lava Golem and a Rigid Lava Golem.";
				}
				else {
					mes "[Lily]";
				}
				mes "Haunted on the 3rd floor of Nogg Road";
				mes "^0000FFDefeat 10 Rigid Lava Golem^000000 and tell me the density difference.";
				callsub( S_Give, .@quest_ongoing );
			case 0:
			case 1:
				mes "[Lily]";
				mes "Haunted on the 3rd floor of Nogg Road";
				mes "^0000FFDefeat 10 Rigid Lava Golem^000000 and tell me the density difference.";
				close;
			case 2:
				mes "[Lily]";
				mes "How was it?";
				mes "How was it different from just a Lava Golem?";
				next;
				mes "[Lily]";
				mes "Um... that's right. The shell...";
				mes "Yes? The soles of the feet? Indeed...";
				mes "Hmmmm. Okay";
				callsub( S_SetDelay, .@quest_ongoing, .@quest_first, .@quest_delay, 1590396,1113275 );
			}
			end;
		case 4:
			switch( checkquest(.@quest_ongoing,HUNTING) ) {
			case -1:
				if (.@quest_ongoing == .@quest_first) {
					mes "[Lily]";
					mes "Rigid Explosion and Rigid Blazer are said to crumble much better than normal Explosion and Blazers.";
					mes "...our professor.";
					next;
					mes "[Lily]";
					mes "Haunted on the 3rd floor of Nogg Road,";
					mes "^0000FFKill 10 Rigid Explosion^000000";
					mes "^0000FFand 10 Rigid Blazer^000000 and tell them how they feel.";
					mes "You don't have to touch it. You can tell just by looking at it...";
				}
				else {
					mes "[Lily]";
					mes "Haunted on the 3rd floor of Nogg Road,";
					mes "^0000FFKill 10 Rigid Explosion^000000";
					mes "^0000FFand 10 Rigid Blazer^000000 and tell them how they feel.";
				}
				callsub( S_Give, .@quest_ongoing );
			case 0:
			case 1:
				mes "[Lily]";
				mes "Haunted on the 3rd floor of Nogg Road,";
				mes "^0000FFKill 10 Rigid Explosion^000000";
				mes "^0000FFand 10 Rigid Blazer^000000 and tell them how they feel.";
				close;
			case 2:
				mes "[Lily]";
				mes "How was it?";
				mes "How is it different from just Explosion or Blazer?";
				next;
				mes "[Lily]";
				mes "Um... that's right. Pass...";
				mes "It's much more crumbly...";
				mes "Aha, that's a lot more dust.";
				mes "Hmmmm. Okay";
				callsub( S_SetDelay, .@quest_ongoing, .@quest_first, .@quest_delay, 3251388,2275966 );
			}
			end;
		case 5:
			mes "[Lily]";
			mes "Ah...";
			mes "When will I ever be able to escape from the professor's magic...";
			close;
		}
		end;
	case 2:
		mes "[Lily]";
		mes "As you can see, I'm just an incompetent sage.";
		mes "The professor I'm serving is a bit stubborn... I mean, someone has to investigate.";
		next;
		mes "[Lily]";
		mes "But I am still not allowed to enter the 3rd floor of Nogg Road.";
		mes "How did I get to the entrance and they said they would never let me in.";
		mes "That's right... not a place for sage to fit in.";
		next;
		mes "[Lily]";
		mes "Then what can I do? Why don't all the bards sing only what they see and hear?";
		mes "Some people have heard of this and that, others have told me, so it must be.";
		next;
		mes "[Lily]";
		mes "Don't worry. I'll use the adventurer's name when I report it to the professor...";
		mes "Yes...  " + strcharinfo(0) + ".";
		mes "All right.";
		next;
		mes "[Lily]";
		mes "There is a list of monsters that will be research materials, so please check the quests if you are interested.";
		close;
	case 3:
		mes "[Lily]";
		mes "Ah, no...!";
		mes "Generous adventurer, please free me from the professor's magic...!";
		close;
	}
	end;

S_CheckDelay:
	switch( checkquest(getarg(0),PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Lily]";
		mes "You have already completed today's report.";
		mes "Will you help me with tomorrow's report...?";
		close;
	case 2:
		erasequest getarg(0);
		break;
	}
	return;

S_Give:
	next;
	if (select( "I accept.", "I'm busy." ) == 2) {
		mes "[Lily]";
		mes "Originally, research is about persistence.";
		mes "Help me when you're not busy.";
		close;
	}
	mes "[Lily]";
	mes "Thank you!";
	mes "I'll be waiting here.";
	setquest getarg(0);
	close;

S_SetDelay:
	.@quest_ongoing = getarg(0);
	.@quest_first = getarg(1);
	.@quest_delay = getarg(2);
	next;
	mes "[Lily]";
	mes "Thank you for your kind explanation.";
	mes "But I don't think you can understand the whole story by just that. Although this is the beauty of requesting an investigation...";
	mes "I'll ask you again tomorrow.";
	if (.@quest_ongoing == .@quest_first)
		completequest .@quest_ongoing;
	else
		erasequest .@quest_ongoing;
	setquest .@quest_delay;
	getexp getarg(3), getarg(4);
	close;

OnInit:
	setunitdata getnpcid(0), UNPC_CLASS, JOB_SAGE;
	setunitdata getnpcid(0), UNPC_SEX, SEX_FEMALE;
	setunitdata getnpcid(0), UNPC_HAIRCOLOR, 6;
	setunitdata getnpcid(0), UNPC_HAIRSTYLE, 22;
	setunitdata getnpcid(0), UNPC_HEADTOP, 316;

	// completed first quest
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(8550,HUNTING) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(8553,HUNTING) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(8556,HUNTING) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(8559,HUNTING) == 2" );

	// completed daily
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(8552,HUNTING) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(8555,HUNTING) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(8558,HUNTING) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(8561,HUNTING) == 2" );

	// timeout
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(8551,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(8554,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(8557,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(8560,PLAYTIME) == 2" );

	// not started first quest
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8550) == 0 && checkquest(8551,PLAYTIME) == -1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8553) == 0 && checkquest(8553,PLAYTIME) == -1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8556) == 0 && checkquest(8555,PLAYTIME) == -1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8559) == 0 && checkquest(8557,PLAYTIME) == -1" );

	// not started daily
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8550) == 2 && isbegin_quest(8552) == 0 && checkquest(8551,PLAYTIME) == -1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8553) == 2 && isbegin_quest(8555) == 0 && checkquest(8554,PLAYTIME) == -1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8556) == 2 && isbegin_quest(8558) == 0 && checkquest(8557,PLAYTIME) == -1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8559) == 2 && isbegin_quest(8561) == 0 && checkquest(8560,PLAYTIME) == -1" );
	end;
}

// ein_dun03
einbech,143,244,3	script	Apprentice Researcher Sally#extdq01	4_F_LGTGIRL,{
	if (BaseLevel < 180) {
		mes "[Sally]";
		mes "Hello, adventurer!";
		mes "Please introduce me to a talented adventurer!";
		mes "A very, very important matter on which my job is at stake..!";
		next;
		mes "^4d4dffThere are quests over 180 Lv.^000000";
		close;
	}
	if (checkquest(7879,HUNTING) == 2) {
		mes "[Sally]";
		mes "We were able to collect enough data for Poisonous and Toxious!";
		erasequest 7879;
		setquest 7880;
		getexp 27512240,19258560;
		next;
	}
	if (checkquest(7881,HUNTING) == 2) {
		mes "[Sally]";
		mes "I have collected enough data for Green and Red Minerals!";
		erasequest 7881;
		setquest 7882;
		getexp 27836640,19485600;
		next;
	}
	if (checkquest(7883,HUNTING) == 2) {
		mes "[Sally]";
		mes "The data for White and Purple Minerals are as follows. It was very helpful.";
		erasequest 7883;
		setquest 7884;
		getexp 27838400,19486880;
		next;
	}
	if (checkquest(7885,HUNTING) == 2) {
		mes "[Sally]";
		mes "Abyssman's data is always amazing.";
		erasequest 7885;
		setquest 7886;
		getexp 6938800,4857160;
		next;
	}
	if (checkquest(7887,HUNTING) == 2) {
		mes "[Sally]";
		mes "You have successfully obtained Jewelry Ant's and White Porcellio's data!";
		erasequest 7887;
		setquest 7888;
		getexp 13854240,9697960;
		next;
	}
	mes "[Sally]";
	mes "When will this poor apprenticeship end?";
	next;
	mes "[Sally]";
	mes "I am desperately looking for help from a talented adventurer.";
	mes "Just like you!";
	mes "Would you like to help protect the poor trainee researcher's job?";
	next;
	switch( select( "New Toxic Gas Research", "Special Mineral Research 1", "Special Mineral Research 2", "Abyssman Research", "Mine Bug Research", "Why are you doing this?" ) ) {
	case 1:
		switch( checkquest(7880,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Sally]";
			mes "Um, don't overdo it.";
			mes "Opportunities always come.";
			close;
		case 2:
			erasequest 7880;
			break;
		}
		switch( checkquest(7879,HUNTING) ) {
		case -1:
			mes "[Sally]";
			mes "I need data to research the poison gas monster newly discovered in the Einbech Mine Dungeon.";
			mes "It is difficult to deal with the monsters occupying the mines with the manpower here, so we have to deal with both.";
			next;
			mes "[Sally]";
			mes "I'm collecting data while the adventurer is fighting ^4d4dffPoisonous and Toxious^000000.";
			mes "Isn't it a good deal?";
			next;
			if (select( "Received a request", "Rejected" ) == 2) {
				mes "[Sally]";
				mes "It's ok.";
				mes "The world is wide and there are many adventurers.";
				close;
			}
			mes "[Sally]";
			mes "Then please take care of the ^4d4dffPoisonous and Toxious^000000 that appear on the ^4d4dff3rd floor of the Einbech Mine Dungeon^000000!";
			setquest 7879;
			close;
		case 0:
		case 1:
			mes "[Sally]";
			mes "Poisonous and Toxious are here on the 3rd floor of the Einbech Mine Dungeon.";
			mes "Probably, it's hard to deal with ordinary people like me, so I'll have to hide and watch what you kill and collect data.";
			close;
		case 2:
			end;
		}
		end;
	case 2:
		switch( checkquest(7882,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Sally]";
			mes "Um, don't overdo it.";
			mes "Opportunities always come.";
			close;
		case 2:
			erasequest 7882;
			break;
		}
		switch( checkquest(7881,HUNTING) ) {
		case -1:
			mes "[Sally]";
			mes "There are several types of Minerals. The Minerals we want to investigate this time are ^4d4dffGreen Mineral and Red Mineral^000000.";
			mes "Collect data necessary for research while controlling the number of individuals!";
			next;
			if (select( "Received a request", "Rejected" ) == 2) {
				mes "[Sally]";
				mes "It's ok.";
				mes "The world is wide and there are many adventurers.";
				close;
			}
			mes "[Sally]";
			mes "Then please take care of the ^4d4dffGreen and Red Minerals^000000 that appear on the ^4d4dff3rd floor of the Einbech mine dungeon^000000!";
			setquest 7881;
			close;
		case 0:
		case 1:
			mes "[Sally]";
			mes "Green Minerals and Red Minerals are found here on the 3rd floor of the Einbech Mine Dungeon.";
			mes "Be careful, they are dangerous.";
			close;
		case 2:
			end;
		}
		end;
	case 3:
		switch( checkquest(7884,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Sally]";
			mes "Um, don't overdo it.";
			mes "Opportunities always come.";
			close;
		case 2:
			erasequest 7884;
			break;
		}
		switch( checkquest(7883,HUNTING) ) {
		case -1:
			mes "[Sally]";
			mes "There are several types of Minerals. The Minerals we want to investigate this time are ^4d4dffWhite Minerals and Purple Minerals^000000.";
			mes "Collect data necessary for research while controlling the number of individuals!";
			next;
			if (select( "Received a request", "Rejected" ) == 2) {
				mes "[Sally]";
				mes "It's ok.";
				mes "The world is wide and there are many adventurers.";
				close;
			}
			mes "[Sally]";
			mes "Then please take care of the ^4d4dffWhite Mineral and Purple Mineral^000000 that appear on the ^4d4dff3rd floor of the Einbech Mine Dungeon^000000!";
			setquest 7883;
			close;
		case 0:
		case 1:
			mes "[Sally]";
			mes "White minerals and Purple minerals are found here on the 3rd floor of the Einbech Mine Dungeon.";
			mes "Be careful, they are dangerous.";
			close;
		case 2:
			end;
		}
		end;
	case 4:
		switch( checkquest(7886,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Sally]";
			mes "Um, don't overdo it.";
			mes "Opportunities always come.";
			close;
		case 2:
			erasequest 7886;
			break;
		}
		switch( checkquest(7885,HUNTING) ) {
		case -1:
			mes "[Sally]";
			mes "If you look into an abyss, it is said that the abyss is eaten, not meowed.";
			mes "I think the popular name Abyssman is also like that.";
			mes "So we need data from ^4d4dffAbyssman^000000.";
			next;
			if (select( "Received a request", "Rejected" ) == 2) {
				mes "[Sally]";
				mes "It's ok.";
				mes "The world is wide and there are many adventurers.";
				close;
			}
			mes "[Sally]";
			mes "Then, please take care of the ^4d4dffAbyssmen^000000 who appear in the ^4d4dff3rd floor of the Einbech Mine Dungeon^000000!";
			setquest 7885;
			close;
		case 0:
		case 1:
			mes "[Sally]";
			mes "The Abyssman are here on the 3rd floor of the Einbech Mine Dungeon.";
			mes "Be careful, they are dangerous.";
			close;
		case 2:
			end;
		}
		end;
	case 5:
		switch( checkquest(7888,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Sally]";
			mes "Um, don't overdo it.";
			mes "Opportunities always come.";
			close;
		case 2:
			erasequest 7888;
			break;
		}
		switch( checkquest(7887,HUNTING) ) {
		case -1:
			mes "[Sally]";
			mes "Specialized insects live in dark places like dungeons.";
			mes "The data to be collected this time are ^4d4dffWhite Porcellio and Jewelry Ant^000000, also known as mineworms.";
			mes "Is it very different from the normal Porcellio?";
			next;
			if (select( "Received a request", "Rejected" ) == 2) {
				mes "[Sally]";
				mes "It's ok.";
				mes "The world is wide and there are many adventurers.";
				close;
			}
			mes "[Sally]";
			mes "Then, please take care of the ^4d4dffWhite Porcellio and Jewelry Ant^000000 who appear in the ^4d4dff3rd floor of the Einbech Mine Dungeon^000000!";
			setquest 7887;
			close;
		case 0:
		case 1:
			mes "[Sally]";
			mes "White Porcellio and Jewelry Ant are here on the 3rd floor of the Einbech Mine Dungeon.";
			mes "Be careful, they are dangerous.";
			close;
		case 2:
			end;
		}
		end;
	case 6:
		mes "[Sally]";
		mes "Um? That's to be a full-time employee!";
		mes "Not long ago, I joined Regenschrum as a trainee researcher, but this is what I was appointed for.";
		mes "It's about collecting data on mining monsters, so this personnel evaluation depends on it.";
		next;
		mes "[Sally]";
		mes "And there were constant complaints from the headquarters asking what to do with the mine monsters.";
		mes "While collecting data, it also moderates monster subjugation. Whoops, if that's the case, this evaluation is a win-win, a win-win!";
		close;
	}
	end;

OnInit:
	// completed
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(7879,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(7881,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(7883,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(7885,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(7887,HUNTING) == 2" );

	// timeout
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(7880,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(7882,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(7884,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(7886,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(7888,PLAYTIME) == 2" );

	// not started
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(7879) == 0 && checkquest(7880,PLAYTIME) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(7881) == 0 && checkquest(7882,PLAYTIME) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(7883) == 0 && checkquest(7884,PLAYTIME) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(7885) == 0 && checkquest(7886,PLAYTIME) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(7887) == 0 && checkquest(7888,PLAYTIME) == -1" );
	end;
}

einbech,156,243,3	script	Need help#exsk	1_M_SMITH,{
	mes "[Olive]";
	mes "The orders keep pouring in, and everyone who works there is running away... It's a big deal, a big deal.";
	close;
}

einbech,154,244,5	script	Need help#exsk_	4_F_JOB_BLACKSMITH,{
	mes "[Atri]";
	mes "Of course, I'd rather learn the sword faster! It's only ten years since I've sharpened a pickaxe, so I'll learn it quickly.";
	close;
}

einbech,149,257,4	script	Site manager Elmen#extdq0	4_TOWER_16,{
	if (checkweight(25814,100) == 0 || checkweight(1201,1) == 0 || (MaxWeight - Weight) < 10000) {
		mes "- You cannot proceed because you have too many items. -";
		close;
	}
	mes "[Elmen]";
	mes "Hello. Adventurer.";
	mes "If you're here to purchase Dynite mining equipment or refine ore into Dynite, you've come to the right place.";
	next;
	switch( select( "Dynite Refinement", "Dynite Shop", "Dynite Equipment Exchange" ) ) {
	case 1:
		npctalk "Elmen: You can refine up to 100 Dynite at a time. The machine is small.", "", bc_self;
		mes "[Elmen]";
		mes "<ITEM>[Dynite]<INFO>25814</INFO></ITEM> Refined Ore.";
		mes "<ITEM>[Radium]<INFO>25809</INFO></ITEM> ^777777(currently " + countitem(25809) + ")^000000";
		mes "<ITEM>[Lindium]<INFO>25810</INFO></ITEM> ^777777(currently " + countitem(25810) + ")^000000";
		mes "<ITEM>[Odium]<INFO>25811</INFO></ITEM> ^777777(currently " + countitem(25811) + ")^000000";
		mes "<ITEM>[Ferdium]<INFO>25812</INFO></ITEM> ^777777(currently " + countitem(25812) + ")^000000";
		mes "<ITEM>[Fidium]<INFO>25813</INFO></ITEM> ^777777(currently " + countitem(25813) + ")^000000";
		mes "You need one each of the five types of ore.";
		next;
		input .@val;
		if (.@val > 100) {
			mes "[Elmen]";
			mes "I'm sorry. Adventurer.";
			mes "Dynite Refinement can only be refined up to 100 at a time? The machine is small, so there is no help. Please understand.";
			close;
		}
		if (.@val == 0) {
			mes "[Elmen]";
			mes "Cancel?";
			mes "If you need refinement of the Dynite, please find it anytime. There is no one who can do it without me.";
			close;
		}
		if (countitem(25809) < .@val || countitem(25810) < .@val || countitem(25811) < .@val || countitem(25812) < .@val || countitem(25813) < .@val) {
			mes "[Elmen]";
			mes "Hey! This makes it difficult for each other, don't you run out of materials needed for refining? The materials!";
			close;
		}
		specialeffect EF_REPAIRWEAPON;
		progressbar_npc "FFFF00",1;
		delitem 25809,.@val;	// Ein_REDIUM
		delitem 25810,.@val;	// Ein_RINDIUM
		delitem 25811,.@val;	// Ein_ODIUM
		delitem 25812,.@val;	// Ein_PURDIUM
		delitem 25813,.@val;	// Ein_WHIDIUM
		getitem 25814,.@val;	// Ein_DYNITE
		mes "[Elmen]";
		mes "" + .@val + " Dynite have been refined. It's perfect today!";
		close;
	case 2:
		mes "[Elmen]";
		mes "There are various accessories and modification permits. Look carefully at what you want before buying.";
		close2;
		callshop "barter_ein_dun03";
		end;
	case 3:
		mes "[Elmen]";
		mes "I can exchange the equipment with the Dynite, but it's already in a tightly sealed box.";
		mes "Give me 50 ^4d4dffDynites^000000 and I will open a ^4d4dffa weapon box^000000 for you.";
		next;
		mes "[Elmen]";
		mes "I don't know what will come out, but the quality is good. Would you like to open it?";
		next;
		if (select( "Close your eyes and exchange.", "Do not exchange." ) == 2) {
			mes "[Elmen]";
			mes "Kee, this is a waste, it was a good deal.";
			close;
		}
		if (countitem(25814) < 50) {
			mes "[Elmen]";
			mes "You don't have enough Dynite friends.";
			mes "I don't know what's going to come out, so it's hard to go anywhere and get this kind of equipment at this price.";
			close;
		}
		// unknown text
		getgroupitem(IG_Ein_1HITEMbox);
		end;
	}
}

//Odin Past (unofficial translation)
odin_tem01,108,152,3	script	Folklorist Cinnamon	881,{
	if(BaseLevel < 180) {
		mes "What are you doing here?";
		mes "You are not strong enough!";
		next;
		mes .n$;
		mes "Come back when you're at least 180.";
		close;
	}
	
	mes .n$;
	mes "Have you heard about the story of Odin Tample young adventurer?";
	next;
	mes .n$;
	mes "In this land, i sense something off.";
	next;
	mes .n$;
	mes "Once i was learning about the history of this tample,";
	mes "i sense a dimensional gap, that leads to another dimension.";
	next;
	mes .n$;
	mes "I have a feeling that it will lead us into the past of the Odin Tample.";
	next;
	mes .n$;
	mes "I was to afraid back then, because i sensed a strong and powerfull entities,";
	mes "gathered beyond that gap";
	next;
	mes .n$;
	mes "I need a volunteer to go beyond that gap,";
	mes "and finally i meet you here.";
	next;
	mes .n$;
	mes "I sense you have a power to investigate more about this ruins,";
	mes "Are you interested.";
	next;
	switch(select("Share discoveries:I don't wanna.")) {
	case 1:
		mes .n$;
		mes "I'll give you missions!";
		mes "There's a few things I want you to do, so here are the missions";
		next;
		.@q = select("X century XX gold.:What is a Valkyrie.:I'm done") - 1;
		mes .n$;
		if(.@q == 2) {
			mes "Oh, that's alright.";
			mes "If you're tired, you should rest.";
			mes "See you tomorrow.";
			mes "Don't overdo it";
			close;
		}
		switch(checkquest(.Odin_delay[.@q],PLAYTIME)) {
			case 0:
			case 1:
			mes "You are still exhausted from the past discoveries. Kindly rest first..";
			close;
		
			case 2:
			completequest .Odin_delay[.@q];
			erasequest .Odin_delay[.@q];
			mes "You are free to share you discoveries with me again.";
			close;
		}
		switch(checkquest(.Odin_quest[.@q],HUNTING)) {
			case -1:
			mes "Beyond the gap, there are powerfull entities.";
			mes "Be safe!";
			next;
			switch(.@q) {

				case 0: // Quest: X century XX gold
				mes .n$;
				mes "^0000FFAngelgolt(Blue) & Angelgolt(Pink)^000000";
				mes "I need you to fight 2 kinds of Angelgolt";
				mes "I read on the bible of Odin, the entities are looked alike, and have different colour";
				next;
				mes .n$;
				mes "^0000FF30 Angelgolt(Blue)^000000";
				mes "^0000FF40 Angelgolt(Pink)^000000";
				break;
					
				case 1: // Quest: What is a Valkyrie
				mes .n$;
				mes "^0000FFHoly Skogul & Holy Frus^000000";
				mes "I need you to fight 2 kinds of Fallen Angel";
				mes "It's called Holy Fruss, and Holy Skogul";
				next;
				mes .n$;
				mes "Beware!!";
				mes "They are the angle of frustation and sorrow";
				mes "dont let your guard down";
				next;
				mes .n$;
				mes "^0000FF30 Holy Fruss^000000";
				mes "^0000FF30 Holy Skogul^000000";
				break;
			}
			mes "When you come back, I will inspect your results.";
			mes "How about it?";
			next;
			if(select("That's not too difficult.:I refuse") == 2) {
				mes .n$;
				mes "If you are busy, it can't be helped.";
				mes "Help us when you have time ~ <3";
				close;
			}
			mes .n$;
			mes "Let's do it.";
			mes "Unfortunately i dont have power to warp you.";
			mes "You know how to get there right...";
			next;
			mes .n$;
			mes "The gap is located at the peak of the last Ruin";
			setquest .Odin_quest[.@q];
			break;
			
			case 0:
			case 1:
			switch(.@q) {
				case 0:
				mes "You're not finished yet on the quest.";
				mes "Are the monsters too powerful?";
				close;
				
				case 1:
				mes "You're not finished yet on the quest.";
				close;
			}
			case 2:
			switch(.@q) {
				case 0:
				case 1:
				mes "Oohh! Well done, that's exactly what I'm looking for.";
				mes "Very interesting...";
				mes "Oh yeah, here is your reward for your hard work.";
				mes "See you again next time";
				getexp .Odin_bexp[.@q],.Odin_jexp[.@q];
				completequest .Odin_quest[.@q];
				erasequest .Odin_quest[.@q];
				setquest .Odin_delay[.@q];
				close;
			}
		}
		close;
	
	case 3:
		mes .n$;
		mes "Bye";
		break;
	}
close;

OnInit:
	.n$ = "[Folklorist Cinnamon]";
	setarray .Odin_quest[0],7889,7891;
	setarray .Odin_delay[0],7890,7892;
	setarray .Odin_bexp[0],50190276,44210156;
	setarray .Odin_jexp[0],35133280,30947160;
	questinfo QTYPE_QUEST, QMARK_YELLOW, "BaseLevel > 180";
end;
}

// nif_dun
moc_para01,14,19,7	script	Old scholar#lv200	2_M_SAGE_OLD,{
	if (BaseLevel < 200) {
		mes "[Old scholar]";
		mes "I would like to do more research, but if my life is really in danger...";
		next;
		mes "[Old scholar]";
		mes "I have no choice but to hire a strong and sincere adventurer. Hmm...";
		next;
		mes "[Old scholar]";
		mes "I think level 200 would be enough... It's easy to say, but I'm not the type of person who can be easily found.";
		close;
	}
	switch( isbegin_quest(8640) ) {
	case 0:
		if (isbegin_quest(8639) == 0) {
			mes "[Old scholar]";
			mes "Oh, oh my, my gosh. The strong and sincere adventurer I've been looking for has appeared here.";
			mes "Would you like to help me with my research?";
			next;
			if (select( "Listen to the request", "Suspicious..." ) == 2) {
				mes "[Old scholar]";
				mes "Even if you look at my eyes that recognized your skills at a glance, please do something...!";
				close;
			}
			mes "[Old scholar]";
			mes "Please don't do that even if you look at my eyes, which recognized your skills at a glance...!";
			mes "...?";
			mes "What? Will you help me?";
			next;
			mes "{Old scholar]";
			mes "No, that's it... Everyone refused, so the hanging words got stuck in my mouth.";
			mes "Thank you for your cooperation.";
			next;
			select( "You're still cooperating..." );
			mes "[Old scholar]";
			mes "Come on, that's it. Of course, if you are as talented as you, you can go to Niflheim.";
			mes "Of course I don't have many days left to go, but it's not the right time and I can't come back.";
			next;
			mes "[Old scholar]";
			mes "According to recent sources... Deep in the darkness of Niflheim, the dead hold a banquet.";
			mes "in a form we cannot imagine.";
			mes "But there is nowhere to hear more about it.";
			next;
			mes "[Old scholar]";
			mes "You'll find out soon anyway, but I'm curious now.";
			mes "Can you take a look? I'll give you plenty of examples.";
			next;
			if (select( "That's enough. Can I come back?", "What if I can't come back?" ) == 2) {
				mes "[Old scholar]";
				mes "You wouldn't even think that you wouldn't be able to come back to your level...";
				mes "If you're still that careful, okay. Come back when you're ready.";
				close;
			}
			setquest 8639;
			mes "[Garim Springfield]";
			mes "Thank you. Turns out I forgot to introduce myself.";
			mes "My name is Garim Springfield.";
			mes "I worked at Sage Castle for a long time... Now that I'm retired, I want to spend some leisure time here and also put in requests...";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "Relax...";
			next;
			mes "[Garim Springfield]";
			mes "Yes. It's free.";
			mes "Give me a wish, an idle old man.";
			mes "Then I'll wait for the good news.";
			close;
		}
		mes "[Garim Springfield]";
		mes "What are you doing? Go fast.";
		close;
	case 1:
		mes "[Garim Springfield]";
		mes "Huh? Did you really visit the banquet hall deep in Niflheim?";
		mes "You came back alive?";
		mes "Okay then, let me tell you a story.";
		next;
		mes "[Garim Springfield]";
		mes "Hmm hmm... I see!";
		mes "I prepared like this, so I won't be afraid if I go later!";
		next;
		mes "[Garim Springfield]";
		mes "The research will last forever...!";
		completequest 8640;
		close;
	case 2:
		mes "[Garim Springfield]";
		mes "It made me feel better because I thought that research could be done even after death.";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "BaseLevel >= 200 && isbegin_quest(8639) == 0 && isbegin_quest(8640) == 0" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8640) == 1" );
	end;
}

niflheim,164,102,3	script	Tired looking dead#lv20	4_F_NFDEADMGCIAN,{
	switch( isbegin_quest(8640) ) {
	case 0:
		switch( isbegin_quest(8639) ) {
		case 0:
			mes "[Tired looking dead]";
			mes "Ha-am...";
			mes "I can't sleep";
			mes "What's the fuss that you can't sleep even after you're dead.";
			mes "Let's get some sleep...";
			mes "I'm going to die of noise";
			close;
		case 1:
			mes "[Tired looking dead]";
			mes "Ha-am...";
			mes "Huh? What, I don't deal with peddlers.";
			next;
			if (select( "You have a bad complexion", "Go back quietly" ) == 2) {
				mes "[Tired looking dead]";
				mes "Oh, did you mean to ask if there were sleeping pills... But I'm dead... You won't hear... Hmm.";
				close;
			}
			mes "[Tired looking dead]";
			mes "Uh, how did you know?";
			mes "Your complexion is so bad... you look real.";
			mes "Do you have a sleeping pill?";
			next;
			select("I'm not a junkie" );
			mes "[Tired looking dead]";
			mes "Ah... I'm sorry. I misunderstood. All the people who have come this far are weird kids or people who sell drugs, so I kicked them out.";
			next;
			mes "[Tired looking dead]";
			mes "By the way... how did you know I looked tired? Is my complexion that bad?";
			next;
			mes "[Tired looking dead]";
			mes "Actually, I've been dead for a while, but I've only recently been to Niflheim. So I decided to sleep here in this house...";
			mes "You can't sleep at night because it's so noisy next door.";
			next;
			mes "[Tired looking dead]";
			mes "No, the pain of not being able to sleep because of the noise next door...";
			mes "Oh, not this next door. Everyone ran away here.";
			mes "Because it's cheap, there's a reason...";
			next;
			mes "[Tired looking dead]";
			mes "Yes, <NAVI>[there]<INFO>niflheim,148,124,0,101,0</INFO></NAVI>";
			mes "The crazy villagers over there... they have a banquet every day.";
			next;
			mes "[Tired looking dead]";
			mes "Because every day is a day in that place, every day!!";
			next;
			mes "[Tired looking dead]";
			mes "Ha... I know, even if it's every day, there's a set time.";
			mes "By the way... If you were a drinker who would have gone home on time while you were alive, would you do that even in death?";
			next;
			mes "[Tired looking dead]";
			mes "I'm... dead, so I just want to sleep peacefully...";
			mes "I hope someone knocks them down and returns them after the banquet is over.";
			next;
			select( "Banquet is..." );
			mes "[Tired looking dead]";
			mes "Yeah. ...you look pretty strong, there's alcohol... it's dead, so it's magic.";
			mes "If you can silence those who are drunk with magical powers all night long, I will reward you.";
			mes "Yes, of course every day.";
			next;
			mes "[Milla]";
			mes "I am Milla. I am now a resident of Niflheim.";
			mes "Please help me sleep, my dear.";
			erasequest 8639;
			setquest 8640;
			close;
		case 2:
			end;
		}
		end;
	case 1:
	case 2:
		mes "[Milla]";
		mes "Yes, thank you for coming back.";
		mes "Ha-am...";
		mes "For me and my neighbors... for a good night's sleep.";
		next;
		if (select( "Listen to the request.", "Reject." ) == 2) {
			mes "[Milla]";
			mes "You can't do this if you're busy...";
			mes "Ah, after all, the living do not hear that sound. Is this my agony only known to the dead...";
			npctalk "Another Dead: Noisy! Get some sleep!", "#lv200althema", bc_self;
			npctalk "Another Dead: He really can't sleep!", "#lv200althema2", bc_self;
			close;
		}
		mes "[Milla]";
		mes "Beloved living, thank you for your mercy.";
		mes "It's a luxurious facility with a banquet hall and an opera house, but each one is a little different.";
		mes "I'll ask for that kind of skill based on your kindness...";
		next;
		switch( select( "He looks cute", "That's not an instrument", "Plays the piano", "Guys with messy hair", "The ones with dolls", "Wake them up", "Stop" ) ) {
		case 1:
			switch( checkquest(8642,PLAYTIME) ) {
			case -1:
				break;
			case 0:
			case 1:
				mes "[Milla]";
				mes "I think they've had enough home today.";
				mes "I hope you can help me tomorrow if you have time.";
				close;
			case 2:
				erasequest 8642;
				break;
			}
			switch( checkquest(8641,HUNTING) ) {
			case -1:
				mes "[Milla]";
				mes "They look cute... they're terribly noisy.";
				mes "^0000FF" + getmonsterinfo("GHOST_CUBE", MOB_NAME) + "^000000,";
				mes "^0000FF" + getmonsterinfo("LUDE_GAL", MOB_NAME) + "^000000";
				next;
				mes "[Milla]";
				mes "I wish I could beat 15 " + getmonsterinfo("GHOST_CUBE", MOB_NAME) + "";
				mes "and 15 of their mate " + getmonsterinfo("LUDE_GAL", MOB_NAME) + ", who haunted the banquet hall of the dead,";
				mes "and make them holy for a day.";
				next;
				if (select( "I accept", "I'm busy today" ) == 2) {
					mes "[Milla]";
					mes "Ummm...";
					mes "Yeah... Well, I don't die just because I can't sleep...";
					mes "I'm already dead";
					close;
				}
				mes "[Milla]";
				mes "Thank you for your kind heart.";
				mes "Blessed be the mercy of the living!";
				setquest 8641;
				close;
			case 0:
			case 1:
				mes "[Milla]";
				mes "I wish I could beat 15 " + getmonsterinfo("GHOST_CUBE", MOB_NAME) + "";
				mes "and 15 of their mate " + getmonsterinfo("LUDE_GAL", MOB_NAME) + ", who haunted the banquet hall of the dead,";
				mes "and make them holy for a day.";
				close;
			case 2:
				mes "[Milla]";
				mes "Kya, did you hear them scream all the way here?";
				mes "I think I can sleep a little deeper today thanks to you...";
				mes "I have to make this commotion again tomorrow.";
				mes "Thank you.";
				erasequest 8641;
				setquest 8642;
				// getexp 15642570,10949790;	// pre-rebalance
				getexp 20300909,10949790;	// rebalance (unknown jexp, copy from pre-rebalance)
				close;
			}
			end;
		case 2:
			switch( checkquest(8645,PLAYTIME) ) {
			case -1:
				break;
			case 0:
			case 1:
				mes "[Milla]";
				mes "I think they've had enough home today.";
				mes "I hope you can help me tomorrow if you have time.";
				close;
			case 2:
				erasequest 8645;
				break;
			}
			switch( checkquest(8644,HUNTING) ) {
			case -1:
				mes "[Milla]";
				mes "It's called ^0000FF" + getmonsterinfo("BRUTAL_MURDERER", MOB_NAME) + "^000000.";
				mes "They have knives in their hands... ";
				mes "It's too loud to knock anywhere!";
				next;
				mes "[Milla]";
				mes "I wish I could beat 10 " + getmonsterinfo("BRUTAL_MURDERER", MOB_NAME) + "";
				mes "and 10 of their mate " + getmonsterinfo("GAN_CEANN", MOB_NAME) + ", who haunted the banquet hall of the dead,";
				mes "and make them holy for a day.";
				next;
				if (select( "I accept", "I'm busy today" ) == 2) {
					mes "[Milla]";
					mes "Ummm...";
					mes "Yeah... Well, I don't die just because I can't sleep...";
					mes "I'm already dead.";
					close;
				}
				mes "[Milla]";
				mes "Thank you for your kind heart.";
				mes "Blessed be the mercy of the living!";
				setquest 8644;
				close;
			case 0:
			case 1:
				mes "[Milla]";
				mes "I wish I could beat 10 " + getmonsterinfo("BRUTAL_MURDERER", MOB_NAME) + "";
				mes "and 10 of their mate " + getmonsterinfo("GAN_CEANN", MOB_NAME) + ", who haunted the banquet hall of the dead,";
				mes "and make them holy for a day.";
				close;
			case 2:
				mes "[Milla]";
				mes "Kya, did you hear the sound of their cleavers and their helmets flying all the way up to here?";
				mes "I think I can sleep a little deeper today thanks to you...";
				mes "Thank you.";
				erasequest 8644;
				setquest 8645;
				// getexp 10756120,7541880;	// pre-rebalance
				getexp 14106860,7541880;	// rebalance (unknown jexp, copy from pre-rebalance)
				close;
			}
			end;
		case 3:
			switch( checkquest(8648,PLAYTIME) ) {
			case -1:
				break;
			case 0:
			case 1:
				mes "[Milla]";
				mes "I think they've had enough home today.";
				mes "I hope you can help me tomorrow if you have time.";
				close;
			case 2:
				erasequest 8648;
				break;
			}
			switch( isbegin_quest(8647) ) {
			case 0:
				mes "[Milla]";
				mes "If you go into the banquet hall of the dead there, there will be a piano.";
				mes "It actually screams when a living person knocks on it.";
				mes "Would it be fun?";
				next;
				mes "[Milla]";
				mes "Play the <NAVI>[piano]<INFO>nif_dun01,140,202,0,101,0</INFO></NAVI>";
				mes "of the banquet hall of the dead.";
				mes "There is no such thing as a request song.";
				next;
				if (select( "I accept", "I'm busy today" ) == 2) {
					mes "[Milla]";
					mes "Ummm...";
					mes "Yeah... Well, I don't die just because I can't sleep...";
					mes "I'm already dead";
					close;
				}
				mes "[Milla]";
				mes "Thank you for your kind heart.";
				mes "Blessed be the mercy of the living!";
				setquest 8647;
				close;
			case 1:
				mes "[Milla]";
				mes "Play the <NAVI>[piano]<INFO>nif_dun01,140,202,0,101,0</INFO></NAVI>";
				mes "of the banquet hall of the dead.";
				mes "There is no such thing as a request song.";
				close;
			case 2:
				mes "[Milla]";
				mes "Hahaha, did you hear that? It's like alcohol... No, it's like that if you drink magic and act like a hawk.";
				mes "I think I can sleep a little deeper today thanks to you...";
				mes "Thank you.";
				erasequest 8647;
				erasequest 8649;
				setquest 8648;
				getexp 10000000,7500000;
				close;
			}
			end;
		case 4:
			if (BaseLevel < 240) {
				mes "[Milla]";
				mes "Hmm... no.";
				mes "It's still too early to leave it to you...";
				mes "I'll wait until you reach level 240.";
				mes "I have time.";
				close;
			}
			switch( checkquest(8651,PLAYTIME) ) {
			case -1:
				break;
			case 0:
			case 1:
				mes "[Milla]";
				mes "I think they've had enough home today.";
				mes "I hope you can help me tomorrow if you have time.";
				close;
			case 2:
				erasequest 8651;
				break;
			}
			switch( isbegin_quest(8650) ) {
			case 0:
			case 1:
				switch( checkquest(8650,HUNTING) ) {
				case -1:
					mes "[Milla]";
					mes "I mean, there are kids called ^0000FF" + getmonsterinfo("DISGUISER", MOB_NAME) + "^000000. ";
					mes "He's got his hair like a bomb hit, and he looks so excited.";
					mes "^0000FF" + getmonsterinfo("BLUEMOON_LOLI_RURI", MOB_NAME) + "^000000, it can't be that loud when you get together with guys with broom hair.";
					next;
					mes "[Milla]";
					mes "I hope you show the hot taste to";
					mes "the 15 ^0000FF" + getmonsterinfo("DISGUISER", MOB_NAME) + "^000000 and the 15 ^0000FF" + getmonsterinfo("BLUEMOON_LOLI_RURI", MOB_NAME) + "^000000";
					mes "that haunt the collapsed Opera House.";
					next;
					if (select( "I accept", "I'm busy today" ) == 2) {
						mes "[Milla]";
						mes "Ummm...";
						mes "Yeah... Well, I don't die just because I can't sleep...";
						mes "I'm already dead";
						close;
					}
					mes "[Milla]";
					mes "Thank you for your kind heart.";
					mes "Blessed be the mercy of the living!";
					setquest 8650;
					close;
				case 0:
				case 1:
					mes "[Milla]";
					mes "I hope you show the hot taste to";
					mes "the 15 ^0000FF" + getmonsterinfo("DISGUISER", MOB_NAME) + "^000000 and the 15 ^0000FF" + getmonsterinfo("BLUEMOON_LOLI_RURI", MOB_NAME) + "^000000";
					mes "that haunt the collapsed Opera House.";
					close;
				case 2:
					mes "[Milla]";
					mes "Huh, huh, I can hear the bomb head dusting all the way up to here.";
					mes "Thanks to you, I will sleep well today.";
					mes "Thank you. See you again tomorrow.";
					completequest 8650;
					setquest 8651;
					getexp 44984725,0;	// rebalance (unknown jexp)
					close;
				}
				end;
			case 2:
				switch( checkquest(8652,HUNTING) ) {
				case -1:
					mes "[Milla]";
					mes "I hope you show the hot taste to";
					mes "the 15 ^0000FF" + getmonsterinfo("DISGUISER", MOB_NAME) + "^000000 and the 15 ^0000FF" + getmonsterinfo("BLUEMOON_LOLI_RURI", MOB_NAME) + "^000000";
					mes "that haunt the collapsed Opera House.";
					next;
					if (select( "I accept", "I'm busy today" ) == 2) {
						mes "[Milla]";
						mes "Ummm...";
						mes "Yeah... Well, I don't die just because I can't sleep...";
						mes "I'm already dead";
						close;
					}
					mes "[Milla]";
					mes "Thank you for your kind heart.";
					mes "Blessed be the mercy of the living!";
					setquest 8652;
					close;
				case 0:
				case 1:
					mes "[Milla]";
					mes "I hope you show the hot taste to";
					mes "the 15 ^0000FF" + getmonsterinfo("DISGUISER", MOB_NAME) + "^000000 and the 15 ^0000FF" + getmonsterinfo("BLUEMOON_LOLI_RURI", MOB_NAME) + "^000000";
					mes "that haunt the collapsed Opera House.";
					close;
				case 2:
					mes "[Milla]";
					mes "Huh, huh, I can hear the bomb head dusting all the way up to here.";
					mes "Thanks to you, I will sleep well today.";
					mes "Thank you. See you again tomorrow.";
					erasequest 8652;
					setquest 8651;
					getexp 44984725,0;	// rebalance (unknown jexp)
					close;
				}
				end;
			}
			end;
		case 5:
			if (BaseLevel < 240) {
				mes "[Milla]";
				mes "Hmm... no.";
				mes "It's still too early to leave it to you...";
				mes "I'll wait until you reach level 240.";
				mes "I have time.";
				close;
			}
			switch( checkquest(8654,PLAYTIME) ) {
			case -1:
				break;
			case 0:
			case 1:
				mes "[Milla]";
				mes "I think they've had enough home today.";
				mes "I hope you can help me tomorrow if you have time.";
				close;
			case 2:
				erasequest 8654;
				break;
			}
			switch( isbegin_quest(8653) ) {
			case 0:
			case 1:
				switch( checkquest(8653,HUNTING) ) {
				case -1:
					mes "[Milla]";
					mes "If you look at the collapsed opera house there,";
					mes "you'll see kids wearing dolls. There's " + getmonsterinfo("GROTE", MOB_NAME) + " and " + getmonsterinfo("PIERROTZOIST", MOB_NAME) + "^000000...";
					mes "All the dolls they wear are so noisy.";
					next;
					mes "[Milla]";
					mes "I hope you show the hot taste to";
					mes "the 10 ^0000FF" + getmonsterinfo("GROTE", MOB_NAME) + "^000000 and the 10 ^0000FF" + getmonsterinfo("PIERROTZOIST", MOB_NAME) + "^000000";
					mes "that haunt the collapsed Opera House.";
					next;
					if (select( "I accept", "I'm busy today" ) == 2) {
						mes "[Milla]";
						mes "Ummm...";
						mes "Yeah... Well, I don't die just because I can't sleep...";
						mes "I'm already dead";
						close;
					}
					mes "[Milla]";
					mes "Thank you for your kind heart.";
					mes "Blessed be the mercy of the living!";
					setquest 8653;
					close;
				case 0:
				case 1:
					mes "[Milla]";
					mes "I hope you show the hot taste to";
					mes "the 10 ^0000FF" + getmonsterinfo("GROTE", MOB_NAME) + "^000000 and the 10 ^0000FF" + getmonsterinfo("PIERROTZOIST", MOB_NAME) + "^000000";
					mes "that haunt the collapsed Opera House.";
					close;
				case 2:
					mes "[Milla]";
					mes "Kepok, what did you really do?";
					mes "A while ago, " + getmonsterinfo("GROTE", MOB_NAME) + " and " + getmonsterinfo("PIERROTZOIST", MOB_NAME) + " went home saying they wouldn't make a noise again.";
					mes "Of course not. I will come again tomorrow.";
					mes "Thank you. See you tomorrow.";
					completequest 8653;
					setquest 8654;
					getexp 29944101,0;	// rebalance (unknown jexp)
					close;
				}
				end;
			case 2:
				switch( checkquest(8655,HUNTING) ) {
				case -1:
					mes "[Milla]";
					mes "I hope you show the hot taste to";
					mes "the 10 ^0000FF" + getmonsterinfo("GROTE", MOB_NAME) + "^000000 and the 10 ^0000FF" + getmonsterinfo("PIERROTZOIST", MOB_NAME) + "^000000";
					mes "that haunt the collapsed Opera House.";
					next;
					if (select( "I accept", "I'm busy today" ) == 2) {
						mes "[Milla]";
						mes "Ummm...";
						mes "Yeah... Well, I don't die just because I can't sleep...";
						mes "I'm already dead";
						close;
					}
					mes "[Milla]";
					mes "Thank you for your kind heart.";
					mes "Blessed be the mercy of the living!";
					setquest 8655;
					close;
				case 0:
				case 1:
					mes "[Milla]";
					mes "I hope you show the hot taste to";
					mes "the 10 ^0000FF" + getmonsterinfo("GROTE", MOB_NAME) + "^000000 and the 10 ^0000FF" + getmonsterinfo("PIERROTZOIST", MOB_NAME) + "^000000";
					mes "that haunt the collapsed Opera House.";
					close;
				case 2:
					mes "[Milla]";
					mes "Kepok, what did you really do?";
					mes "A while ago, " + getmonsterinfo("GROTE", MOB_NAME) + " and " + getmonsterinfo("PIERROTZOIST", MOB_NAME) + " went home saying they wouldn't make a noise again.";
					mes "Of course not. I will come again tomorrow.";
					mes "Thank you. See you tomorrow.";
					erasequest 8655;
					setquest 8654;
					getexp 29944101,0;	// rebalance (unknown jexp)
					close;
				}
				end;
			}
			end;
		case 6:
			if (BaseLevel < 240) {
				mes "[Milla]";
				mes "Hmm... no.";
				mes "It's still too early to leave it to you...";
				mes "I'll wait until you reach level 240.";
				mes "I have time.";
				close;
			}
			switch( checkquest(8657,PLAYTIME) ) {
			case -1:
				break;
			case 0:
			case 1:
				mes "[Milla]";
				mes "I think they've had enough home today.";
				mes "I hope you can help me tomorrow if you have time.";
				close;
			case 2:
				erasequest 8657;
				break;
			}
			switch( isbegin_quest(8656) ) {
			case 0:
				mes "[Milla]";
				mes "The smashed... no, don't say that.";
				mes "If you go to the collapsed opera house, you will find ghosts in the frames.";
				mes "But they don't even have a body...";
				mes "Snoring, my dear.";
				next;
				mes "[Milla]";
				mes "A <NAVI>[ghost talking]<INFO>nif_dun02,37,221,0,101,0</INFO></NAVI>";
				mes "and <NAVI>[snoring]<INFO>nif_dun02,249,221,0,101,0</INFO></NAVI>";
				mes "inside the banquet hall of the dead, twist your nose.";
				mes "You need to calm them down.";
				next;
				if (select( "I accept", "I'm busy today" ) == 2) {
					mes "[Milla]";
					mes "Ummm...";
					mes "Yeah... Well, I don't die just because I can't sleep...";
					mes "I'm already dead";
					close;
				}
				mes "[Milla]";
				mes "Thank you for your kind heart.";
				mes "Blessed be the mercy of the living!";
				setquest 8656;
				close;
			case 1:
				if (isbegin_quest(8658) == 0 || isbegin_quest(8659) == 0) {
					mes "[Milla]";
					mes "A <NAVI>[ghost talking]<INFO>nif_dun02,37,221,0,101,0</INFO></NAVI>";
					mes "and <NAVI>[snoring]<INFO>nif_dun02,249,221,0,101,0</INFO></NAVI>";
					mes "inside the banquet hall of the dead, twist your nose.";
					mes "You need to calm them down.";
					close;
				}
				mes "[Milla]";
				mes "...I can't eat any more...";
				mes "...hick.";
				mes "Oh, have you been there? I fell asleep without realizing it.";
				mes "It's really annoying to hear that snoring all the way...";
				next;
				mes "[Milla]";
				mes "It seems that the living do not hear well.";
				mes "Anyway, thank you for today.";
				mes "Sleep is precious...";
				mes "Sleep enough while you're alive.";
				erasequest 8656;
				erasequest 8658;
				erasequest 8659;
				setquest 8657;
				getexp 13000000,0;	// rebalance (unknown jexp)
				close;
			case 2:
				end;
			}
			end;
		case 7:
			mes "[Milla]";
			mes "You can't do this if you're busy...";
			mes "Ah, after all, the living do not hear that sound. Is this my agony only known to the dead...";
			npctalk "Another Dead: Noisy! Get some sleep!", "#lv200althema", bc_self;
			npctalk "Another Dead: He really can't sleep!", "#lv200althema2", bc_self;
			close;
		}
		end;
	}
	end;

OnInit:
	// prerequisite
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8639) == 1" );

	// daily
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(8641,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(8644,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8647) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(8650,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(8652,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(8653,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(8655,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8656) == 1 && isbegin_quest(8658) == 1 && isbegin_quest(8659) == 1" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(8642,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(8645,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(8648,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(8651,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(8654,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(8657,PLAYTIME) == 2" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 200 && (checkquest(8641,HUNTING) == -1 && checkquest(8642,PLAYTIME) == -1)" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 200 && (checkquest(8644,HUNTING) == -1 && checkquest(8645,PLAYTIME) == -1)" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 200 && (isbegin_quest(8647) == 0 && checkquest(8648,PLAYTIME) == -1)" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 240 && (checkquest(8650,HUNTING) == -1 && checkquest(8651,PLAYTIME) == -1)" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 240 && isbegin_quest(8650) == 2 && checkquest(8652,HUNTING) == -1 && checkquest(8651,PLAYTIME) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 240 && (checkquest(8653,HUNTING) == -1 && checkquest(8654,PLAYTIME) == -1)" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 240 && isbegin_quest(8653) == 2 && checkquest(8655,HUNTING) == -1 && checkquest(8654,PLAYTIME) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 240 && (isbegin_quest(8656) == 0 && checkquest(8657,PLAYTIME) == -1)" );
	end;
}

niflheim,160,106,3	duplicate(dummy_npc)	#lv200althema	CLEAR_NPC
niflheim,165,105,3	duplicate(dummy_npc)	#lv200althema2	CLEAR_NPC


niflheim,143,125,6	script	Funny Gatekeeper's Friend#lv20	LUDE_GAL,{
	npctalk "Funny Gatekeeper's Friend: Sing~ All night~ or forever~", "", bc_self;
	end;
}

niflheim,145,126,6	script	Angry Gatekeeper#lv200	GHOST_CUBE,{
	npctalk "Angry Gatekeeper: Kye-Look! Living! Play! No need to go!", "", bc_self;
	npctalk "Funny Gatekeeper's Friend: No need to leave! Play with us!", "Funny Gatekeeper's Friend#lv20", bc_self;
	end;
}

nif_dun01,140,202,3	script	Piano#lv200	CLEAR_NPC,{
	if (isbegin_quest(8647) == 1) {
		mes "I couldn't hear anything, but the dead around me seem to be in an uproar.";
		mes "Let's report to Milla.";
		completequest 8647;
		setquest 8649;
		npctalk "Clink clink... Crackle!", "Piano#lv200", bc_self;
		npctalk "Sleep alive! Kyaaak!", "Exciting Cello#lv200", bc_self;
		npctalk "The living man plays the piano!", "Dancing Cello#lv200", bc_self;
		npctalk "Oh my God, I can't really play...", "Quiet Cello#lv200", bc_self;
		npctalk "How could that be...", "Stranger Cello#lv200", bc_self;
		npctalk "You ruined the atmosphere!", "Happy Cello#lv200", bc_self;
		npctalk "Piano Ooo!!!", "Serious Contrabass#lv2", bc_self;
		npctalk "The piano is stunned...", "Sleek Harp#lv200", bc_self;
		close;
	}
	// note: no text
	end;

OnInit:
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8647) == 1" );
	end;
}
nif_dun01,133,198,3	duplicate(dummy_npc)	Exciting Cello#lv200	CLEAR_NPC
nif_dun01,138,195,3	duplicate(dummy_npc)	Dancing Cello#lv200	CLEAR_NPC
nif_dun01,153,195,3	duplicate(dummy_npc)	Quiet Cello#lv200	CLEAR_NPC
nif_dun01,152,198,3	duplicate(dummy_npc)	Stranger Cello#lv200	CLEAR_NPC
nif_dun01,157,198,3	duplicate(dummy_npc)	Happy Cello#lv200	CLEAR_NPC
nif_dun01,156,202,3	duplicate(dummy_npc)	Serious Contrabass#lv2	CLEAR_NPC
nif_dun01,133,201,3	duplicate(dummy_npc)	Sleek Harp#lv200	CLEAR_NPC

nif_dun01,148,43,3	script	Helpful Gatekeeper#240	DISGUISER,{
	if (BaseLevel < 240) {
		npctalk "Helpful Gatekeeper: Uh-huh-huh. You don't have enough grooming to get through here.", "", bc_self;
		npctalk "Silent Gatekeeper: ...means you are under-leveled.", "Silent Gatekeeper#240", bc_self;
		end;
	}
	npctalk "Helpful Gatekeeper: Uh-huh-huh. Mountain, go up. Can't come down.", "", bc_self;
	npctalk "Silent Gatekeeper: ...means welcome.", "Silent Gatekeeper#240", bc_self;
	end;
}

nif_dun01,143,43,7	script	Silent Gatekeeper#240	GROTE,{
	npctalk "Silent Gatekeeper: ...", "", bc_self;
	end;
}

nif_dun02,37,221,3	script	Sleep Talking Ghost#lv240	CLEAR_NPC,3,3,{
	if (isbegin_quest(8656) == 1) {
		switch( isbegin_quest(8659) ) {
		case 0:
			setquest 8659;
			mes "I twisted the nose of the ghost in the frame.";
			mes "There was no touch, but the ghost stopped talking.";
			npctalk "????????!", "", bc_self;
			if (isbegin_quest(8658) == 1)
				mes "Let's go report to Milla.";
			close;
		case 1:
			mes "The ghost that was talking about is not seen, and another ghost is sleeping.";
			close;
		default:
			end;
		}
	}
	end;

OnTouch:
	if (isbegin_quest(8659) == 0) {
		npctalk "I want to eat it too... it looks delicious...", "", bc_self;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8656) == 1 && isbegin_quest(8659) == 0" );
	end;
}

nif_dun02,249,221,3	script	Snoring Ghost#lv240	CLEAR_NPC,3,3,{
	if (isbegin_quest(8656) == 1) {
		switch( isbegin_quest(8658) ) {
		case 0:
			setquest 8658;
			mes "I twisted the nose of the ghost in the frame.";
			mes "There was no touch, but the ghost stopped snoring.";
			npctalk "Nang!", "", bc_self;
			if (isbegin_quest(8659) == 1)
				mes "Let's go report to Milla.";
			close;
		case 1:
			mes "The snoring ghost is nowhere to be seen, and another ghost is sleeping.";
			close;
		default:
			end;
		}
	}
	end;

OnTouch:
	if (isbegin_quest(8658) == 0)
		npctalk "Dorolong Dorolong...", "", bc_self;
	end;

OnInit:
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8656) == 1 && isbegin_quest(8658) == 0" );
	end;
}

// amicitia
ein_fild08,158,96,3	script	Lana#ami	4_M_ILYA,{
	if (BaseLevel < 215) {
		mes "[Lana]";
		mes "Beyond this is dangerous, so access is restricted except for adventurers above a certain level.";
		next;
		mes " - This area can be accessed from level 215 or higher -";
		close;
	}
	mes "[Lana]";
	mes "Would you like to go to the first floor of the Amicitia General Lab?";
	next;
	if (select( "Go", "Stay" ) == 2) {
		mes "[Lana]";
		mes "Okay. Have a nice adventure then.";
		close;
	}
	mes "[Lana]";
	mes "Okay. I will transfer you to the Amicitia General Lab.";
	close2;
	warp "amicitia1",242,244;
	end;
}

pub_cat,86,33,5	script	Ansuriya#ami	4_F_REBELLION2,{
	if (BaseLevel < 215) {
		mes "[Ansuriya]";
		mes "Oh, you are the hero of the last operation.";
		mes "It's an honor to meet you in a place like this. May I buy you a drink?";
		next;
		mes " - This is a quest that can be performed at level 215 or higher - ";
		close;
	}
	if (isbegin_quest(16529) == 0) {
		mes "[Ansuriya]";
		mes "Oh, you are the hero of the last operation.";
		mes "It's an honor to meet you in a place like this. May I buy you a drink?";
		next;
		mes "[Gerbena]";
		mes "Wow, " + strcharinfo(0) + "! Can you sign?";
		mes "It's an honor! Hehe~";
		next;
		mes "[Ansuriya]";
		mes "Here, a glass of tropical sograt, please!";
		mes "Oh, are you okay with Tropical Sogra?";
		next;
		mes "[Gerbena]";
		mes "I like chocolate milk.";
		next;
		mes "[Ansuriya]";
		mes "You buy it with your money.";
		mes "By the way, Gerbena, what's going on with Amicitia's edge?";
		next;
		emotion ET_PROFUSELY_SWAT, getnpcid(0,"Gerbena#ami");
		mes "[Gerbena]";
		mes "Well, that's it once the formation is finished.";
		mes "However, it is true that the number of rebellions to be deployed is a bit short since the total number of members is small.";
		next;
		mes "[Ansuriya]";
		mes "Hmm, how are you? Gerbena. Would you like to go?";
		next;
		emotion ET_SWEAT, getnpcid(0,"Gerbena#ami");
		mes "[Gerbena]";
		mes "Ah, take a look. My head is falling out just with all the staff.";
		next;
		mes "[Ansuriya]";
		mes "What should I do? We need two teams per floor...";
		next;
		emotion ET_AHA, getnpcid(0,"Gerbena#ami");
		mes "[Gerbena]";
		mes "I, maybe a hero.";
		mes "Can you help us?";
		next;
		emotion ET_QUESTION;
		mes "[Ansuriya]";
		mes "Gerbena, what are you talking about all of a sudden!";
		next;
		mes "[Gerbena]";
		mes "No, the hero was assigned a mission in association with Rebellion in the last operation.";
		mes "So I was wondering if you could apply for me again this time...";
		next;
		emotion ET_SURPRISE;
		mes "[Ansuriya]";
		mes "Uh! yes.";
		mes "Adventurer. What do you think?";
		next;
		select( "Listen to what's going on..." );
		mes "[Ansuriya]";
		mes "Oh, yes. That's the order.";
		mes "Nothing else, we have discovered a new laboratory around Einbrok.";
		next;
		mes "[Ansuriya]";
		mes "The name is <FONT COLOR = 0000CD>Amicitia General Research Institute</FONT>. According to the data provided by Rekenberg, it is said to be a sister laboratory of the Werner Institute.";
		next;
		mes "[Ansuriya]";
		mes "It seems that it did not conduct very illegal experiments and focused on the study of culturing chimeras as homunculus, but it is said that it was abandoned after an explosion at an underground magical power plant.";
		next;
		mes "[Ansuriya]";
		mes "I came under investigation because one of the administrators of that abandoned lab was Werner.";
		next;
		mes "[Ansuriya]";
		mes "As a result of the investigation, the chimeras in cultivation ran out due to an explosion, and the monsterized ones were left unattended.";
		next;
		mes "[Ansuriya]";
		mes "I didn't know if it was just neglected or if it was intentionally neglected.";
		next;
		mes "[Ansuriya]";
		mes "Because it's not far from the city, I took care of cleaning up at Rebellion for the sake of safety... As you've heard, we're having trouble due to a shortage of people.";
		next;
		mes "[Gerbena]";
		mes "If the hero helps us, we will be able to organize the work more easily!";
		next;
		mes "[Ansuriya]";
		mes "Yes. Can you help me subdue?";
		next;
		if (select( "Helps", "Doesn't help" ) == 2) {
			mes "[Ansuriya]";
			mes "Ah... Excuse me.";
			mes "It's our job, and we're just looking for your help.";
			next;
			mes "[Ansuriya]";
			mes "Your hero must have his work!";
			mes "We will try to solve this by ourselves.";
			close;
		}
		mes "[Gerbena]";
		mes "It is an honor to work with you!";
		next;
		mes "[Ansuriya]";
		mes "Thank you for your cooperation!";
		mes "Then regrouping...";
		next;
		mes "[Ansuriya]";
		mes "Are you comfortable taking the mission alone or with the Rebellion's mission team?";
		next;
		select( "I'm comfortable alone" );
		mes "[Ansuriya]";
		mes "Then, unite the Rebellion mission team and perform the hero's sole mission! mumble.";
		mes "Oh, why am I thinking alone. Gerbena, you do it too!";
		next;
		mes "[Gerbena]";
		mes "Ah, I see!";
		setquest 16529;
		completequest 16529;
		next;
	}
	mes "[Ansuriya]";
	mes "Hero, these are the things we would like to ask of you from Amicitia.";
	mes "Which of these would you like to help with?";
	next;
	switch( select("Earth and Fire", "Water and Wind", "Werner's Trace", "Doesn't help" ) ) {
	case 1:
		switch( checkquest(16530,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Ansuriya]";
			mes "Hmm? Have you changed your mind?";
			next;
			mes "[Ansuriya]";
			mes "Well, then! we have to re-organize! Ugh.";
			mes "Hero, why don't you reconsider calmly?";
			close;
		case 2:
			erasequest 16530;
			break;
		}
		switch( checkquest(16531,HUNTING) ) {
		case -1:
			mes "[Ansuriya]";
			mes "I would like to ask you to hunt <FONT COLOR = 0000CD>mutant chimera Amitera and mutant chimera Fillia</FONT> among the chimeras in culture.";
			next;
			mes "[Ansuriya]";
			mes "The properties of earth and fire are much stronger than those of existing entities, and you will be able to recognize them immediately.";
			mes "Actually, it's more like a monster than a homunculus...";
			next;
			mes "[Ansuriya]";
			mes "Despite the destruction of the culture facility, the number of individuals continues to increase, so I would like to ask for the quantity! about 15 specimens each.";
			next;
			if (select( "Hunt", "Do not hunt" ) == 2) {
				mes "[Ansuriya]";
				mes "Hmm? Have you changed your mind?";
				next;
				mes "[Ansuriya]";
				mes "Well, then! we have to re-organize! Ugh.";
				mes "Hero, why don't you reconsider calmly?";
				close;
			}
			mes "[Ansuriya]";
			mes "Thank you very much for your support. The two types of chimeras will probably be roaming the ground floor of the closed lab Amicitia.";
			next;
			mes "[Ansuriya]";
			mes "Please don't let the chimeras leave the lab.";
			setquest 16531;
			close;
		case 0:
		case 1:
			mes "[Ansuriya]";
			mes "<FONT COLOR = 0000CD>The Mutant Chimera Amitera and the Mutant Chimera Fillia</FONT> will be roaming the first floor of the closed lab Amicitia.";
			next;
			mes "[Ansuriya]";
			mes "15 each, please take good care of the hunt.";
			close;
		case 2:
			mes "[Ansuriya]";
			mes "Have you been there? You have completed all the tasks I mentioned.";
			next;
			mes "[Ansuriya]";
			mes "Rebellion units are also on duty.";
			mes "Thanks to the hero who organized it one step ahead, it seems to have made it easier to enter.";
			next;
			mes "[Ansuriya]";
			mes "As expected, a hero. It is rare to find someone outside of Rebellion who works with such sincerity and cleanliness.";
			mes "I would be grateful if you could join the mission tomorrow as well.";
			erasequest 16531;
			setquest 16530;
			getexp 17726670,12408690;	// TODO: the amount has been changed which the monster update
			close;
		}
		end;
	case 2:
		switch( checkquest(16532,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Ansuriya]";
			mes "Now the rebellion troops are in and are working on follow-up.";
			mes "Hero, it's okay to come after a little rest.";
			next;
			mes "[Ansuriya]";
			mes "Thank you for being so active with us.";
			mes "Will you come back after dawn?";
			close;
		case 2:
			erasequest 16532;
			break;
		}
		switch( checkquest(16533,HUNTING) ) {
		case -1:
			mes "[Ansuriya]";
			mes "I would like to ask you to hunt <FONT COLOR = 0000CD>mutant chimera Litus and mutant chimera Vanilaqus</FONT> among the chimeras that were being cultured.";
			next;
			mes "[Ansuriya]";
			mes "It's easy to tell the difference between the wind and water properties because they have changed into an appearance that clearly reveals them.";
			next;
			mes "[Ansuriya]";
			mes "The number of individuals continues to increase without the help of a culture facility, so the quantity! 15 each, please.";
			next;
			if (select( "Hunt", "Do not hunt" ) == 2) {
				mes "[Ansuriya]";
				mes "Hmm? Have you changed your mind?";
				next;
				emotion ET_KEK;
				mes "[Ansuriya]";
				mes "Well, then! we have to re-organize! Ugh.";
				mes "Hero, why don't you reconsider calmly?";
				close;
			}
			mes "[Ansuriya]";
			mes "Thank you very much for your support. The two types of chimeras are staying on the first floor of the closed lab Amicitia.";
			next;
			mes "[Ansuriya]";
			mes "Please don't let the chimeras leave the lab.";
			setquest 16533;
			close;
		case 0:
		case 1:
			mes "[Ansuriya]";
			mes "<FONT COLOR = 0000CD>Mutant Chimera Litus and Mutant Chimera Vanilaqus</FONT> are staying on the first floor of the closed lab Amicitia.";
			next;
			mes "[Ansuriya]";
			mes "15 each, please take good care of the hunt.";
			close;
		case 2:
			mes "[Ansuriya]";
			mes "Mission completed, confirmed.";
			mes "Now deploy the rebellion troops.";
			next;
			mes "[Ansuriya]";
			mes "Thanks to the hero who organized it one step ahead, we will be able to enter easily..";
			mes "Thank you very much.";
			next;
			mes "[Ansuriya]";
			mes "Working with someone outside of Rebellion, this is the first time I've felt such a good fit.";
			mes "Hero, would you like to join the mission tomorrow as well?";
			setquest 16532;
			erasequest 16533;
			getexp 17724090,12406890;	// TODO: the amount has been changed which the monster update
			close;
		}
		end;
	case 3:
		switch( checkquest(16534,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Ansuriya]";
			mes "Now the rebellion troops are in and are working on follow-up.";
			mes "Hero, it's okay to come after a little rest.";
			next;
			mes "[Ansuriya]";
			mes "Thank you for being so active with us.";
			mes "Will you come back after dawn?";
			close;
		case 2:
			erasequest 16534;
			break;
		}
		switch( isbegin_quest(16535) ) {
		case 0:
			mes "[Ansuriya]";
			mes "This is a high-security job, so I only want to ask the hero a favor.";
			next;
			mes "[Ansuriya]";
			mes "I didn't want to go through the mouths of as many people as possible, so the Rebellion units were excluded from this job.";
			next;
			mes "[Ansuriya]";
			mes "Nothing else, but to find <FONT COLOR = 0000CD>Traces of Werner</FONT> on the 1st floor of the abandoned lab Amicitia.";
			next;
			mes "[Ansuriya]";
			mes "What part of Amicitia was managed by Werner, what kind of experiments he conducted, etc...";
			mes "If anything has had an impact on the Institute, please come to me.";
			next;
			mes "[Ansuriya]";
			mes "Documents, files, data! anything is fine.";
			mes "Would you like to come with me?";
			next;
			if (select( "I will go", "I will not go" ) == 2) {
				mes "[Ansuriya]";
				mes "That's right. It's also annoying...";
				next;
				mes "[Ansuriya]";
				mes "I would appreciate it if you could keep this request a secret.";
				close;
			}
			mes "[Ansuriya]";
			mes "Okay. It won't be easy to find... any traces, so please come to just one.";
			mes "Then, I would like to thank you.";
			setquest 16535;
			close;
		case 1:
			mes "[Ansuriya]";
			mes "It won't be easy to find... any traces, so please come to just one.";
			mes "Then, I would like to thank you.";
			close;
		case 2:
			mes "[Ansuriya]";
			mes "Did you find any traces?";
			mes "You've come to the right place. This note is in Werner's handwriting.";
			next;
			mes "[Ansuriya]";
			mes "Thank you. We will hand this over to the secret wing agents for investigation.";
			mes "Then you should be rewarded for your hard work.";
			next;
			mes "[Ansuriya]";
			mes "Thank you for coming back tomorrow and working with us.";
			mes "Because you can't just leave this to anyone.";
			erasequest 16535;
			erasequest 16545;
			setquest 16534;
			getexp 17000000,12000000;
			close;
		}
		end;
	case 4:
		mes "[Ansuriya]";
		mes "Hmm? Have you changed your mind?";
		next;
		mes "[Ansuriya]";
		mes "Well, then! we have to re-organize! Ugh.";
		mes "Hero, why don't you reconsider calmly?";
		close;
	}
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(16531,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(16533,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16535) == 2" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(16530,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(16532,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(16534,PLAYTIME) == 2" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 215 && (checkquest(16531,HUNTING) == -1 && checkquest(16530,PLAYTIME) == -1)" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 215 && (checkquest(16533,HUNTING) == -1 && checkquest(16532,PLAYTIME) == -1)" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 215 && (isbegin_quest(16535) == 0 && checkquest(16534,PLAYTIME) == -1)" );
	end;
}

amicitia1,57,242,3	script	Something#ami1	4_GC109,{
	if (isbegin_quest(16535) == 1) {
		mes "[Something]";
		mes "There is something on the floor. Shall we take a closer look?";
		next;
		mes "[Something]";
		mes "Research memo in neat handwriting. Werner's handwriting is exactly like this.";
		next;
		mes "[Something]";
		mes "Let's take it and check it out.";
		setquest 16545;
		completequest 16535;
		close2;
		initnpctimer;
		disablenpc();
		end;
	}
	mes "[Something]";
	mes "Something is off the floor.";
	mes "!it looks like it's just garbage.";
	close;

OnTimer300000:	// unknown timer
	stopnpctimer;
	enablenpc();
	end;
}
amicitia1,152,159,3	duplicate(Something#ami1)	Something#ami2	4_GC109
amicitia1,262,139,3	duplicate(Something#ami1)	Something#ami3	4_GC109
amicitia1,36,106,3	duplicate(Something#ami1)	Something#ami4	4_GC109
amicitia1,244,49,3	duplicate(Something#ami1)	Something#ami5	4_GC109

// amicitia2
pub_cat,89,32,3	script	Gerbena#ami	4_M_REBELLION2,{
	if (BaseLevel < 230) {
		mes "[Gerbena]";
		mes "Wow, " + strcharinfo(0) + "! Can you sign?";
		mes "It's an honor! Hehe~";
		next;
		mes " - This is a quest that can be performed at level 230 or higher - ";
		close;
	}
	mes "[Gerbena]";
	mes "Hero, there was a homunculus intensive culture room on the second floor of the lab Amicitia.";
	mes "They were creating more powerful mutated chimeras.";
	next;
	mes "[Gerbena]";
	mes "It's pitiful, but if you're released from the lab, you'll do more damage than you can imagine.";
	mes "Can you help me clean up these chimeras?";
	next;
	switch( select("Imitation and real", "Natural change", "Doesn't help" ) ) {
	case 1:
		switch( checkquest(16536,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Gerbena]";
			mes "Have you already been there today? If so, how about taking a break?";
			mes "If you overwork your body, you may not do well.";
			next;
			mes "[Gerbena]";
			mes "Come back after dawn and work with us!";
			close;
		case 2:
			erasequest 16536;
			break;
		}
		switch( checkquest(16537,HUNTING) ) {
		case -1:
			mes "[Gerbena]";
			mes "Some of the work I was doing in the incubator was mass production of mutated chimeras.";
			next;
			mes "[Gerbena]";
			mes "Re-mutated the mutated homunculus, and further strengthened its aggression.";
			next;
			mes "[Gerbena]";
			mes "Please hunt 15 <FONT COLOR = 0000CD>Mutation Chimera Napeo and Mutant Chimera Galensis</FONT> each.";
			mes "Both are creatures that imitate human form, but add a powerful transformation of the chimera properties to it.";
			next;
			mes "[Gerbena]";
			mes "It's been quite some time since the lab was closed and left unattended.";
			mes "A quick hunt would make you feel more comfortable.";
			next;
			if (select( "Help hunting", "Do not hunt" ) == 2) {
				mes "[Gerbena]";
				mes "Ah, you changed your words!";
				mes "Gerbena vs. Heartbroken!";
				next;
				mes "[Gerbena]";
				mes "But it was our one-sided request.";
				mes "Even if you refuse, we can't help it...";
				close;
			}
			mes "[Gerbena]";
			mes "It's an honor to help!";
			mes "Can I participate with that hero?";
			next;
			mes "[Ansuriya]";
			mes "I don't like it. You're more comfortable doing it alone, calm down, Gerbena.";
			next;
			mes "[Gerbena]";
			mes "Ugh! Please take care of me!!";
			setquest 16537;
			close;
		case 0:
		case 1:
			mes "[Gerbena]";
			mes "Please hunt 15 <FONT COLOR = 0000CD>Mutation Chimera Napeo and Mutant Chimera Galensis</FONT> each.";
			mes "Both are creatures that imitate human form, but add a powerful transformation of the chimera properties to it.";
			close;
		case 2:
			mes "[Gerbena]";
			mes "Now the Illusion Forces are deployed and continue their mission.";
			mes "Thanks to the hero, it's easy to enter and subdue the Chimera.";
			next;
			mes "[Gerbena]";
			mes "Ugh, I also wanted to see the hero's wonderful battle in person...";
			mes "Someday, maybe I'll have a chance to see you?";
			next;
			mes "[Gerbena]";
			mes "If it's okay with you, why don't you come back tomorrow and work with us?";
			erasequest 16537;
			setquest 16536;
			getexp 37253672,0;	// TODO: jexp
			close;
		}
		end;
	case 2:
		switch( checkquest(16538,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Gerbena]";
			mes "Have you already been there today? If so, how about taking a break?";
			mes "If you overwork your body, you may not do well.";
			next;
			mes "[Gerbena]";
			mes "Come back after dawn and work with us!";
			close;
		case 2:
			erasequest 16538;
			break;
		}
		switch( checkquest(16539,HUNTING) ) {
		case -1:
			mes "[Gerbena]";
			mes "Among the homuncules in the intensive culture chamber, there are Mutant Chimera Lavaeter and Mutant Chimera Fulgor.";
			next;
			mes "[Gerbena]";
			mes "It looks similar to the existing Homunculus Dieter and Homunculus Bayeri, but they are very different.";
			mes "It is different from a homunculus in that it reproduces by judging by itself without an owner.";
			next;
			mes "[Gerbena]";
			mes "You can't rescue or do anything. All, every single one of them is to be killed.";
			next;
			mes "[Gerbena]";
			mes "So, hero, would you like to help us hunt 15 <FONT COLOR = 0000CD>mutated Chimera Lavaeter and Mutant Chimera Fulgor</FONT> each?";
			next;
			if (select( "Help hunting", "Do not hunt" ) == 2) {
				mes "[Gerbena]";
				mes "Ah, you changed your words!";
				mes "Gerbena vs. Heartbroken!";
				next;
				mes "[Gerbena]";
				mes "But it was our one-sided request.";
				mes "Even if you refuse, we can't help it...";
				close;
			}
			mes "[Gerbena]";
			mes "It's an honor to help!";
			mes "Can I participate with that hero?";
			next;
			mes "[Ansuriya]";
			mes "He said he didn't like it. You're more comfortable doing it alone, calm down, Gerbena.";
			next;
			mes "[Gerbena]";
			mes "Ugh! Please take care of me!!";
			setquest 16539;
			close;
		case 0:
		case 1:
			mes "[Gerbena]";
			mes "Hero, can you hunt 15 <FONT COLOR = 0000CD>mutated chimera Lavaeter and mutated chimera Fulgor</FONT> each?";
			mes "You can't rescue or do anything. All, every single one of them is to be killed.";
			close;
		case 2:
			mes "[Gerbena]";
			mes "Yes! Mission completed, confirmed. Now, Illusion troops are in!";
			mes "Thanks to you, you will be able to easily enter and subdue the Chimera.";
			next;
			mes "[Gerbena]";
			mes "Ugh, I also wanted to see the hero's beautiful battle in person...";
			mes "Someday, maybe I'll have a chance to see you?";
			next;
			mes "[Gerbena]";
			mes "If it's okay with you, why don't you come back tomorrow and work with us?";
			erasequest 16539;
			setquest 16538;
			getexp 37325968,0;	// TODO: jexp
			close;
		}
		end;
	case 3:
		mes "[Gerbena]";
		mes "Ah, you changed your words!";
		mes "Gerbena vs. Heartbroken!";
		next;
		mes "[Gerbena]";
		mes "But it was our one-sided request.";
		mes "Even if you refuse, we can't help it...";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(16537,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(16539,HUNTING) == 2" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(16536,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(16538,PLAYTIME) == 2" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 230 && (checkquest(16537,HUNTING) == -1 && checkquest(16536,PLAYTIME) == -1)" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 230 && (checkquest(16539,HUNTING) == -1 && checkquest(16538,PLAYTIME) == -1)" );
	end;
}

// sp_rudus4
pub_cat,94,43,5	script	Yulma#rudus4	4_F_ANYA,{
	if (BaseLevel < 200) {
		mes "[Yulma]";
		mes "Uh... who was it?";
		mes "Sorry, I'm not good at remembering people's faces! But I think it's not good enough to ask about my work here.";
		next;
		mes " - This is a quest that can be performed at level 200 or higher - ";
		close;
	}
	switch( isbegin_quest(16521) ) {
	case 0:
		emotion ET_SMILE;
		mes "[Yulma]";
		mes "Oh, " + strcharinfo(0) + " did you come to Meow for a drink?";
		mes "I just had a business, and it's good.";
		next;
		select( "What is it for?" );
		mes "[Yulma]";
		mes "You know that Secret Wings and our rebellion have been tracking the traces of Illusion's illegal experiments, right?";
		next;
		mes "[Yulma]";
		mes "In the meantime, I found a way to the 4th floor of Rudus.";
		next;
		switch( select( "Well, you know.", "Where was Rudus?" ) ) {
		case 1:
			emotion ET_DELIGHT;
			mes "[Yulma]";
			mes "Hehehe, because I can communicate well with " + strcharinfo(0) + ".";
			break;
		case 2:
			emotion ET_SURPRISE;
			mes "[Yulma]";
			mes "What, how many times did you forget?";
			mes "It was the place where Illusion abandoned the failed works that were created after the experiment.";
			next;
			mes "[Yulma]";
			mes "Remember morning, morning? Where the little girl stays.";
			mes "She is on the first floor, and Rudus itself exists on the second and third floors.";
			break;
		}
		next;
		mes "[Yulma]";
		mes "By the way, the 4th floor of Rudus, it was quite a great place....";
		mes "Among the subjects abandoned in Rudus, only particularly powerful ones are gathered.";
		next;
		mes "[Yulma]";
		mes "Researchers of the Wings of Secrets say that after fierce competition among the subjects, the strongest subjects seem to have settled there.";
		next;
		mes "[Yulma]";
		mes "Well, actually, I don't know about complicated things!";
		mes "It seems that the Secret Wing researchers need to study the entities there.";
		next;
		mes "[Yulma]";
		mes "So I was looking for someone to help.";
		mes "To be precise, " + strcharinfo(0) + ", you!";
		next;
		mes "[Yulma]";
		mes "Do you need a job? I know everything~";
		mes "If you have an idea, go to the 3rd floor of Rudus.";
		next;
		mes "[Yulma]";
		mes "<NAVI>[Pion]<INFO>sp_rudus3,380,42,0,101,0</INFO></NAVI> is in control of the path leading down to the fourth floor.";
		mes "Go and say I sent it, and find out if it's worth it and come!";
		setquest 16521;
		close2;
		navigateto("sp_rudus3",380,42);
		end;
	case 1:
		mes "[Yulma]";
		mes "Do you need a job? I know everything~";
		mes "If you have an idea, go to the 3rd floor of Rudus.";
		next;
		mes "[Yulma]";
		mes "<NAVI>[Pion]<INFO>sp_rudus3,380,42,0,101,0</INFO></NAVI> is in control of the path leading down to the fourth floor.";
		mes "Go and say I sent it, and find out if it's worth it and come!";
		close;
	case 2:
		break;
	}
	if (isbegin_quest(16522) == 1) {
		mes "[Yulma]";
		mes "Oh, you went down to the 4th floor of Rudus. How was it?";
		mes "Is the pian doing well? Did the subjects feel a bit worthy of a fight?";
		next;
		mes "[Yulma]";
		mes "Then help me study the people on the wings of the secret.";
		mes "I was looking for someone to hunt because it was not enough to catch and research monsters myself.";
		next;
		select( "Ask if I can just hunt" );
		emotion ET_KEK;
		mes "[Yulma]";
		mes "Oh, I almost forgot.";
		mes "If you attach this chip somewhere on your body and hunt it, researchers can receive data.";
		next;
		mes "[Yulma]";
		mes "New material, eco-friendly, non-toxic, safe material, so you don't have to worry about it.";
		mes "Where would you like to hang it?";
		next;
		select( "Earlobe", "Back neck", "Back of hand", "Forehead" );
		mes "[Yulma]";
		mes "Okay, I'll attach it well so it doesn't bother you.";
		mes "Okay, that's it! Then...";
		completequest 16522;
		next;
	}
	mes "[Yulma]";
	mes "Please take good care of me today!";
	mes "So, what kind of research would you like to help with today?";
	next;
	switch( select("Abyssal Solitude", "Transformation and Evolution", "Data Backup", "Doesn't help" ) ) {
	case 1:
		switch( checkquest(16523,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Yulma]";
			mes "Secret Wings researchers are resting.";
			mes "So, " + strcharinfo(0) + ", how about coming home after a little rest?";
			next;
			mes "[Yulma]";
			mes "The 4th floor of Rudus is not a comfortable place to go in and out easily.";
			mes "Let's get some rest and work fully prepared!";
			close;
		case 2:
			erasequest 16523;
			break;
		}
		switch( checkquest(16524,HUNTING) ) {
		case -1:
			mes "[Yulma]";
			mes "A place where only strong individuals survive and bite stronger ones...";
			mes "Like a deep, dark pit of solitude.";
			next;
			emotion ET_SWEAT;
			mes "[Yulma]";
			mes "Well, I don't know about that!";
			mes "My job is to deliver the requests of researchers.";
			next;
			mes "[Yulma]";
			mes "Researchers want to know how different the subjects of Rudus are from those distributed on the 4th floor.";
			next;
			emotion ET_PROFUSELY_SWAT;
			mes "[Yulma]";
			mes "How much more has it lost its original form, and whether it has changed itself after the experiment.";
			mes "<FONT SIZE = 9>Um... these researchers look a little dangerous too? I think that's where all researchers are, to a person like me.</FONT>";
			next;
			mes "[Yulma]";
			mes "Anyway, you want to collect <FONT COLOR = 0000CD>Dolorian, Plagarion, and Deadre</FONT> data.";
			mes "What if we hunt 10 individuals each?";
			next;
			if (select( "I'll come hunting", "I refuse" ) == 2) {
				mes "[Yulma]";
				mes "We're already comrades on the same boat~?";
				mes "Isn't that right, comrade? Think again!";
				close;
			}
			mes "[Yulma]";
			mes "Okay, if you go hunting and hunting, data will be gathered.";
			mes "And my allowance will be accumulating!";
			setquest 16524;
			close;
		case 0:
		case 1:
			mes "[Yulma]";
			mes "Secret Wings researchers want to collect <FONT COLOR = 0000CD>Dolorian, Plagarion, and Deadre</FONT> data.";
			mes "What if we hunt 10 individuals each?";
			close;
		case 2:
			mes "[Yulma]";
			mes "Today's hunting seems to be successful!";
			mes "How did you know, " + strcharinfo(0) + ", the chip you put on him worked today.";
			next;
			emotion ET_DELIGHT;
			mes "[Yulma]";
			mes "I see it every time, but every time it's amazing, how the chip works.";
			mes "Well, you should pay for the work you did today.";
			next;
			mes "[Yulma]";
			mes "Here you are!";
			mes "Then you're done with a bath, so let's get some rest and come back. Please take care of me tomorrow as well~";
			erasequest 16524;
			setquest 16523;
			getexp 15915940,11141160;	// TODO: the amount has been changed which the monster update
			close;
		}
		end;
	case 2:
		switch( checkquest(16525,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Yulma]";
			mes "Secret Wings researchers left work after work.";
			mes "So, " + strcharinfo(0) + ", how about coming home after a little rest?";
			next;
			mes "[Yulma]";
			mes "The 4th floor of Rudus is not a comfortable place to go in and out easily.";
			mes "You too, get a good rest, and let's work fully prepared!";
			close;
		case 2:
			erasequest 16525;
			break;
		}
		switch( checkquest(16526,HUNTING) ) {
		case -1:
			mes "[Yulma]";
			mes "Twin Carput and Venenum, the 4th-floor entities are greatly altered from the other-floor entities.";
			mes "to become gigantic, or to harbor more venom...";
			next;
			emotion ET_PROFUSELY_SWAT;
			mes "[Yulma]";
			mes "Researchers must be very interested in these guys.";
			mes "That's why I asked you to hunt.";
			mes "<FONT SIZE = 9>Um...why don't we do it? There must be something complicated at the upper level. I don't know.</FONT>";
			next;
			mes "[Yulma]";
			mes "Can you hunt 15 <FONT COLOR = 0000CD>Giant Kaput and Venedi</FONT> each?";
			mes "Data will be collected automatically, so you just need to focus on hunting.";
			next;
			if (select( "I'll come hunting", "I refuse" ) == 2) {
				mes "[Yulma]";
				mes "We're already comrades on the same boat~?";
				mes "Isn't that right, comrade? Think again!";
				close;
			}
			mes "[Yulma]";
			mes "Okay, go and hunt hard!";
			mes "Your performance is my bonus!";
			setquest 16526;
			close;
		case 0:
		case 1:
			mes "[Yulma]";
			mes "Can you hunt 15 <FONT COLOR = 0000CD>Giant Kaput and Venedi</FONT> each?";
			mes "Data will be collected automatically, so you just need to focus on hunting.";
			close;
		case 2:
			mes "[Yulma]";
			mes "Have you been well? You came back from hunting safely.";
			mes "Please tell me that the researchers worked hard today.";
			next;
			mes "[Yulma]";
			mes "Looks like good data has been gathered.";
			mes "Then you should pay for the work you did today.";
			next;
			mes "[Yulma]";
			mes "Here you are!";
			mes "You worked hard today, so get a good rest and come back. Let's work hard tomorrow!";
			erasequest 16526;
			setquest 16525;
			getexp 15176970,11001900;	// TODO: the amount has been changed which the monster update
			close;
		}
		end;
	case 3:
		switch( checkquest(16527,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Yulma]";
			mes "Your researcher, you said you have withdrawn now. Chip maintenance once a day is enough!";
			mes "So, " + strcharinfo(0) + ", how about coming home after a little rest?";
			next;
			mes "[Yulma]";
			mes "The 4th floor of Rudus is not a comfortable place to go in and out easily.";
			mes "Let's get some rest and work fully prepared!";
			close;
		case 2:
			erasequest 16527;
			break;
		}
		switch( isbegin_quest(16528) ) {
		case 0:
			mes "[Yulma]";
			mes "Oh, by the way, are the chips sticking well?";
			mes "It doesn't last that long...";
			next;
			mes "[Yulma]";
			mes "And I have to back up and format the data I have collected so that I can receive new data, but I don't have the talent to do that...";
			next;
			mes "[Yulma]";
			mes "I'll introduce you to a researcher who is currently in the field, would you like to go directly?";
			mes "Probably disguised to observe monsters, but I'll give you the location, so go check it out!";
			next;
			if (select( "Find", "Does not find" ) == 2) {
				mes "[Yulma]";
				mes "Working only with me, isn't it frustrating?";
				mes "It wouldn't be a bad idea to meet the researchers working in the field in person...";
				close;
			}
			mes "[Yulma]";
			mes "Yeah! Isn't it frustrating to only meet with me to get work delivered?";
			next;
			mes "[Yulma]";
			mes "I'm on my way to see you, so if you have any questions, you can ask them directly!";
			mes "<NAVI>[Researcher] I heard that <INFO>sp_rudus4,192,204,0,101,0</INFO></NAVI> mostly burrow around the center of the 4th floor of Rudus.";
			setquest 16528;
			close;
		case 1:
			mes "[Yulma]";
			mes "I'm on my way to meet the secret wing researcher, so if you have any questions, you can ask them directly!";
			mes "<NAVI>[Researcher] I heard that <INFO>sp_rudus4,192,204,0,101,0</INFO></NAVI> mostly burrow around the center of the 4th floor of Rudus.";
			close;
		case 2:
			mes "[Yulma]";
			mes "Have you been? Did you talk a bit?";
			mes "Is the researcher hiding well?";
			next;
			mes "[Yulma]";
			mes "He's famous for hiding things like he did even though he didn't have any hiding skills.";
			mes "That's why you're out there.";
			next;
			mes "[Yulma]";
			mes "Because this is also a job... Since I replaced it safely, the superiors told me to take care of some allowances.";
			next;
			mes "[Yulma]";
			mes "Well, it's good that you come back to me too!";
			mes "Then have a good day and see you tomorrow!";
			erasequest 16528;
			erasequest 16540;
			setquest 16527;
			getexp 15000000,11000000;
			close;
		}
		end;
	case 4:
		mes "[Yulma]";
		mes "Eh, won't you?";
		mes "I was eagerly waiting for " + strcharinfo(0) + "!";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(16524,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(16526,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16528) == 2" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(16523,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(16525,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(16527,PLAYTIME) == 2" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 200 && (checkquest(16524,HUNTING) == -1 && checkquest(16523,PLAYTIME) == -1)" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 200 && (checkquest(16526,HUNTING) == -1 && checkquest(16525,PLAYTIME) == -1)" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 200 && (isbegin_quest(16528) == 0 && checkquest(16527,PLAYTIME) == -1)" );
	end;
}

sp_rudus3,380,42,3	script	Pion#rudus4	4_M_REBELLION3,{
	switch( isbegin_quest(16521) ) {
	case 0:
		emotion ET_SLEEPY;
		mes "[Pion]";
		mes "Zzz... Whoa!";
		mes "Excuse me, sir! No more work!";
		next;
		mes "[Pion]";
		mes "Seup, Ha-am... Down this slope is an access control area.";
		mes "People are not allowed to enter.";
		next;
		select("I'm not an ordinary person." );
		mes "[Pion]";
		mes "Yes? Ah... ah no! " + strcharinfo(0) + " !";
		mes "That... Still, I can't let you in on my own.";
		close;
	case 1:
		emotion ET_SLEEPY;
		mes "[Pion]";
		mes "Zzz... Whoa!";
		mes "Excuse me! No more work!";
		next;
		mes "[Pion]";
		mes "Oops... ah, this is definitely not saliva";
		mes "It is a drop of sweat that shines with passion and effort.";
		next;
		mes "[Pion]";
		mes "Hmm, hmmm. The entrance down this slope is now restricted...";
		mes "What's going on?";
		next;
		if (select( "I want to go to the 4th floor of Rudus.", "Point out the working attitude." ) == 2) {
			mes "[Pion]";
			mes "Oh, there's a problem with your working attitude?";
			mes "Sa, some people might sleep!!";
			next;
			mes "[Pion]";
			mes "I only slept a little!";
			mes "Really!";
			close;
		}
		mes "[Pion]";
		mes "Fourth floor? I'm in control right there...";
		mes "Ah, did you come to see Yulma from Bullet Meow?";
		next;
		mes "[Pion]";
		mes "Then you should pass it.";
		mes "If you want to look at the specimens on the 4th floor and help with a research request, go back to <NAVI>[Yulma]<INFO>pub_cat,94,43,0,101,0</INFO></NAVI> and ask.";
		next;
		mes "[Pion]";
		mes "I'll move you to the 4th floor.";
		close2;
		completequest 16521;
		setquest 16522;
		warp "sp_rudus4",370,156;
		end;
	case 2:
		break;
	}
	emotion ET_SLEEPY;
	mes "[Pion]";
	mes "Zzz... Huh! Shi, excuse me!";
	mes "Are you sure you want to go down to the 4th floor of Rudus?";
	next;
	if (select( "move", "do not move" ) ) {
		mes "[Pion]";
		mes "I see. Ha-am....";
		close;
	}
	mes "[Pion]";
	mes "I'll move you. Take care!";
	close2;
	warp "sp_rudus4",370,156;
	end;

OnInit:
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(16521) == 1" );
	end;
}

sp_rudus4,192,204,3	script	Secret Wing Researcher#rudu	4_SOIL,{
	if (isbegin_quest(16528) == 1) {
		mes "[Secret Wings Researcher]";
		mes "Good. Field work.";
		mes "You need to observe a lot of monsters.";
		next;
		emotion ET_HUK;
		mes "[Secret Wings Researcher]";
		mes "...huh!";
		mes "How did you recognize me?";
		next;
		mes "[Secret Wings Researcher]";
		mes "Oh, look again, " + strcharinfo(0) + ".";
		mes "I got a call. Are you here to renew the chip?";
		next;
		mes "[Secret Wing Researcher]";
		mes "Let's see... Let's get some chips.";
		mes "Hmmmm... Connect with my machine... Empty data...";
		next;
		emotion ET_BEST;
		mes "[Secret Wing Researcher]";
		mes "Okay, that's it! The data is clean and very nice. I'll paste it again.";
		next;
		mes "[Secret Wing Researcher]";
		mes "Because this is also a job, <NAVI>[Yulma]<INFO>pub_cat,94,43,0,101,0</INFO></NAVI> will give you a small allowance when you return.";
		mes "I am always indebted to you. Good job!";
		completequest 16528;
		setquest 16540;
		close;
	}
	mes "[Secret Wing Researcher]";
	mes "Good. Field work.";
	mes "You have to watch a lot of monsters.";
	next;
	emotion ET_HUK;
	mes "[Secret Wing Researcher]";
	mes "...huh!";
	mes "How did you recognize me?";
	next;
	emotion ET_KEK;
	mes "[Secret Wing Researcher]";
	mes "Evil! If you pretend to know, monsters will come!";
	mes "Go away!";
	close;

OnInit:
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(16528) == 1" );
	end;
} 

// abyss_gh
glast_01,189,272,4	script	Mage Nillem#glast	4_M_JOB_WIZARD,{
	mes .n$;
	if(BaseLevel < 175) {
		mes "What are you doing here?";
		mes "I'm looking for a strong adventurer to fill my curiosity!";
		next;
		mes .n$;
		mes "Come back when you're at least 175.";
		close;
	}
	mes "I think I just did the discovery of the century! Do you want to tag along?";
	next;
	switch(select("Let's go!:I need an explanation:Share discoveries:I don't want to.")) {
		
		case 1:
		mes .n$;
		mes "That's the way to go!";
		mes "I can't help, but fall in love with your enthusiasm.";
		close2;
		warp "gl_cas01_",200,26;
		end;
		
		case 2:
		mes .n$;
		mes "There were reports of a weird magical power near Glast Heim Castle.";
		mes "I came to investigate, and what do I discover?";
		next;
		mes .n$;
		mes "A gap in the dimension!";
		mes "This genius wizard is also great at creating dimensional gaps.";
		next;
		mes .n$;
		mes "So I forcibly connected it! I went inside...";
		mes "The flow of time had stopped...";
		mes "Hmm. I have nothing else to say about it.";
		next;
		mes .n$;
		mes "Anyway, the evil monsters trapped inside keep coming in waves!";
		next;
		mes .n$;
		mes "I almost died, but I got out just in time.";
		mes "So I'm recruiting adventurers to join me and explore it together ~ <3";
		close;
		
		case 3:
		mes .n$;
		mes "I don't give out missions, I just want to discover new areas!";
		mes "There's a few things I want to do with you, so let me know before we get going ~ <3";
		next;
		.@q = select("Nothingness.:Freezing.:Mirror-like:I'm done.") - 1;
		mes .n$;
		if(.@q == 3) {
			mes "Oh, that's alright.";
			mes "If you're tired, you should rest.";
			mes "See you tomorrow.";
			mes "Don't overdo it ~ <3";
			close;
		}
		switch(checkquest(.abyss_delay[.@q],PLAYTIME)) {
			case 0:
			case 1:
			mes "You are still exhausted from the past discoveries. Kindly rest first..";
			close;
		
			case 2:
			completequest .abyss_delay[.@q];
			erasequest .abyss_delay[.@q];
			mes "You are free to share you discoveries with me again ~ <3.";
			close;
		}
		switch(checkquest(.abyss_quest[.@q],HUNTING)) {
			case -1:
			mes "Beyond the gap, there are empty-like entities.";
			switch(.@q) {

				case 0: // Quest: Nothing to see
				mes "^0000FFContaminated Raydrics^000000 and ^0000FFContaminated Raydric Archers^000000...";
				mes "It's about their contamination...";
				mes "how does it affect you?";
				next;
				mes .n$;
				mes "^0000FF20 Contaminated Raydrics,";
				mes "Contaminated Raydric Archers.^000000";
				break;
					
				case 1: // Quest: High Freezing Point
				mes "^0000FFFrozen Gargyoles^000000 and ^0000FFPrison Breakers^000000...";
				next;
				mes .n$;
				mes "^0000FF5 Frozen Gargyoles,";
				mes "5 Prison Breakers.^000000";
				break;
						
				case 2: // Quest: A Mirror
				mes "^0000FFIce Ghosts^000000 and ^0000FFFlame Ghosts^000000...";
				mes "They look totally different in this dimension.";
				next;
				mes .n$;
				mes "^0000FF10 Ice Ghosts,";
				mes "10 Flame Ghosts.^000000";
				break;
			}
			mes "When you come back, this genius wizard will inspect your results.";
			mes "How about it, darling?";
			next;
			if(select("That's not too difficult.:I refuse") == 2) {
				mes .n$;
				mes "If you are busy, it can't be helped.";
				mes "Help us when you have time, silly ~ <3";
				close;
			}
			mes .n$;
			mes "Let's do it.";
			mes "Beyond this point, it's hard to know the outcome.";
			mes "If you need to escape the gap, talk to me at the entrance ~ <3";
			setquest .abyss_quest[.@q];
			break;
			
			case 0:
			case 1:
			switch(.@q) {
				case 0:
				mes "You're not finished yet on the discovery.";
				mes "Do you thing they're influenced by";
				mes "the emptiness?";
				close;
				
				case 1:
				mes "You're not finished yet on the discovery.";
				mes "It's not a freezing";
				mes "temperature, but if you're";
				mes "freezing, come see me.";
				close;
				
				case 2:
				mes "You're not finished yet on the discovery.";
				mes "I don't think they";
				mes" are actually on the other side of";
				mes "the mirror, but they are on another dimensional gap..."; 
				close;
			}
			case 2:
			switch(.@q) {
				case 0:
				case 1:
				case 2:
				mes "Oohh! Well done, that's exactly what I'm looking for.";
				mes "Very interesting...";
				mes "Oh yeah, here is your reward for your hard work.";
				mes "See you again next time ~ <3";
				getexp .abyss_bexp[.@q],.abyss_jexp[.@q];
				completequest .abyss_quest[.@q];
				erasequest .abyss_quest[.@q];
				setquest .abyss_delay[.@q];
				close;
			}
		}
		close;
		
		case 4:
		mes .n$;
		mes "Oh, we're cold today, I see.";
		mes "Nillelm is sad!";
		break;
	}
	close;

	OnInit:
	.n$ = "[Nillem]";
	setarray .abyss_quest[0],8541,8544,8547;
	setarray .abyss_delay[0],8542,8545,8548;
	setarray .abyss_bexp[0],8000000,8000000,8000000;
	setarray .abyss_jexp[0],8000000,8000000,8000000;
	end;
	}
	gl_cas01_,205,36,4	script	Mage Nillem#abyss_gl	4_M_JOB_WIZARD,{

	mes "[Nillem]";
	mes "Haha! Everytime I come here, it's a new adventurer!";
	mes "I like it!";
	next;
	if(select("Let's get out of here!:I'll keep looking.") == 2) {
		mes "[Nillem]";
		mes "Sure!";
		close;
	}
	mes "[Nillem]";
	mes "Alright!";
	mes "Let's skip this and go back outside";
	mes "~ <3";
	close2;
	warp "glast_01",191,270;
	end;
}